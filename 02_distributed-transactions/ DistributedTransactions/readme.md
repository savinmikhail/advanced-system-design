#  –í–°–¢–£–ü–õ–ï–ù–ò–ï (1‚Äì2 –º–∏–Ω)

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É:

> ‚Äú–ù—É–∂–Ω–æ —Å–ø–∏—Å–∞—Ç—å –¥–µ–Ω—å–≥–∏, –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä, —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –ò –≤—Å—ë —ç—Ç–æ ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ.‚Äù

–ò –≤–æ—Ç —Ç—ã —Å–∏–¥–∏—à—å –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –¢–ó –∏ –ø–æ–Ω–∏–º–∞–µ—à—å:

* —É –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ —Å–≤–æ—è –±–∞–∑–∞,
* RPC –Ω–µ–Ω–∞–¥—ë–∂–Ω—ã–π,
* –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –∂–∏–≤—ë—Ç –≤ AWS, –¥—Ä—É–≥–æ–π –≤ GCP,
* —Ç—Ä–µ—Ç–∏–π –≤–æ–æ–±—â–µ –Ω–∞ bare-metal,
* —Å–µ—Ç—å –≤—Ä—ë—Ç, –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–ª—è—à—É—Ç, —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–µ—Ä—è—é—Ç—Å—è‚Ä¶

**–ò –∫–∞–∫ —Ç—É—Ç —Å–¥–µ–ª–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å?**

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
–ú–∏—Ä, –≥–¥–µ ACID –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç,
–∞ ‚Äú–æ—Ç–∫–∞—Ç–∏—Ç—å –≤—Å—ë –Ω–∞–∑–∞–¥‚Äù ‚Äî —ç—Ç–æ —Å–∫–∞–∑–∫–∏ –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞.

–°–µ–≥–æ–¥–Ω—è —Ä–∞–∑–±–µ—Ä—ë–º:

* –ø–æ—á–µ–º—É –æ–±—ã—á–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã,
* –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç 2PC (–∏ –ø–æ—á–µ–º—É –æ–Ω–æ –ø–æ—á—Ç–∏ —É–º–µ—Ä–ª–æ),
* —á—Ç–æ —Ç–∞–∫–æ–µ Saga –∏ –ø–æ—á–µ–º—É –≤–µ—Å—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ–¥ –Ω–∞ –Ω–µ–π,
* —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è: orchestration, Temporal, outbox, CDC, idempotency.

–ü–æ–µ—Ö–∞–ª–∏.

---

# üß® –ë–õ–û–ö 1. –ü–û–ß–ï–ú–£ –¢–†–ê–ù–ó–ê–ö–¶–ò–ò –õ–û–ú–ê–Æ–¢–°–Ø –í –ú–ò–ö–†–û–°–ï–†–í–ò–°–ê–• (3‚Äì4 –º–∏–Ω)

–ú–æ–Ω–æ–ª–∏—Ç:

* –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å
* –æ–¥–Ω–∞ –±–∞–∑–∞
* –æ–¥–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
* ACID –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:

* –Ω–µ—Å–∫–æ–ª—å–∫–æ –ë–î
* –Ω–µ—Å–∫–æ–ª—å–∫–æ API
* –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ç–µ–π
* –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞
* latency –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞
* —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç —É–º–µ—Ä–µ—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

–ó—Ä–∏—Ç–µ–ª—é –≤–∞–∂–Ω–æ —É—Å–ª—ã—à–∞—Ç—å:

> ‚Äú–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ**.
> –í—Å—ë, —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º ‚Äî —ç—Ç–æ –ø–æ–ø—ã—Ç–∫–∏ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å.‚Äù

–ü—Ä–∏—á–∏–Ω—ã:

* –Ω–µ—Ç shared lock manager
* –Ω–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ ACID
* —Å–µ—Ç—å –Ω–µ–Ω–∞–¥—ë–∂–Ω–∞
* –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–º–µ—Ä–µ—Ç—å
* –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∂–∏–≤—ë—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é

–≠—Ç–æ –≤–∞–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å ‚Äî –∏ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ.

---

# üß© –ë–õ–û–ö 2. –ö–õ–ê–°–°–ò–ö–ê: Two-Phase Commit (2PC) (4‚Äì5 –º–∏–Ω)

–û–±—ä—è—Å–Ω—è–µ–º **–∫–æ—Ä–æ—Ç–∫–æ**, –Ω–æ —Å –±–æ–ª—å—é.

```mermaid
sequenceDiagram
    participant C as Coordinator
    participant A as Service A
    participant B as Service B

    C->>A: PREPARE?
    A-->>C: OK
    
    C->>B: PREPARE?
    B-->>C: OK
    
    C->>A: COMMIT
    C->>B: COMMIT
```

–ü—Ä–æ–±–ª–µ–º—ã:

* –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä ‚Äî SPoF
* –∑–∞–≤–∏—Å B ‚Üí –±–ª–æ–∫–∏—Ä—É–µ–º –í–°–Å
* prepare –¥–µ—Ä–∂–∏—Ç –¥–æ–ª–≥–∏–µ –ª–æ–∫–∏
* –º–µ–¥–ª–µ–Ω–Ω–∞—è —Å–µ—Ç—å —É–±–∏–≤–∞–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª
* –Ω–µ–ª—å–∑—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

–í—ã–≤–æ–¥:

> 2PC ‚Äî —ç—Ç–æ –∫—Ä–∞—Å–∏–≤–æ –≤ —É—á–µ–±–Ω–∏–∫–∞—Ö.
> –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî –ø–æ—á—Ç–∏ –Ω–µ—Ä–µ–∞–ª–∏–∑—É–µ–º—ã–π –∫–æ—à–º–∞—Ä.

---

# üß© –ë–õ–û–ö 3. 3PC (Three-Phase Commit) (1 –º–∏–Ω)

–£–ø–æ–º–∏–Ω–∞–µ–º, –Ω–æ –Ω–µ —Ç—Ä–∞—Ç–∏–º –≤—Ä–µ–º—è:

* –¥–æ–±–∞–≤–∏–ª–∏ intermediate phase
* —á—É—Ç—å –ª—É—á—à–µ fault tolerance
* –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ç–∞–π–º–∞—É—Ç–æ–≤
* –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±–ª–∞–∫–µ

–ß–µ—Å—Ç–Ω—ã–π –≤—ã–≤–æ–¥:

> ‚Äú3PC ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—á–∏–Ω–∏—Ç—å 2PC, –∫–æ—Ç–æ—Ä–∞—è –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.‚Äù

---

# üöÄ –ë–õ–û–ö 4. SAGA ‚Äî –ö–ê–ö –î–ï–õ–ê–Æ–¢ –í–°–ï –†–ï–ê–õ–¨–ù–´–ï –°–ò–°–¢–ï–ú–´ (10‚Äì12 –º–∏–Ω)

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:

> –ù–µ –¥–µ–ª–∞–µ–º –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å.
> –î–µ–ª–∞–µ–º **workflow**, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –æ—Ç–∫–∞—Ç.

–ü–æ–∫–∞–∑—ã–≤–∞–µ–º:

```mermaid
sequenceDiagram
    participant O as Orchestrator
    participant A as Billing
    participant B as Inventory
    participant C as Orders

    O->>A: –°–ø–∏—Å–∞—Ç—å –¥–µ–Ω—å–≥–∏
    A-->>O: OK
    
    O->>B: –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä
    B-->>O: FAIL
    
    O->>A: –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: –≤–µ—Ä–Ω—É—Ç—å –¥–µ–Ω—å–≥–∏
    A-->>O: OK
    
    O-->>O: Saga FAILED
```

–ü—Ä–æ—Å—Ç–∞—è, –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å–∞–≥–∞. –ü–æ–Ω—è—Ç–Ω–æ –¥–∞–∂–µ –¥–∂—É–Ω—É.

---

# ‚öôÔ∏è –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è SAGA

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* –Ω–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
* –Ω–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–µ—Ä–∂–∏—Ç –ª–æ–∫–∏
* –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è = –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Å–µ—Ä–≤–∏—Å
* –º–æ–∂–Ω–æ –∂–∏—Ç—å —Å eventual consistency
* –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–µ—Ç—Ä–∞–∏—Ç—å
* –ª–µ–≥–∫–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∫—Ä–µ—à–∞

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* –Ω–µ—Ç atomicity
* –Ω–µ—Ç isolation
* –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å ‚Äú–≥—Ä—è–∑–Ω—ã–º–∏‚Äù
* –≤–Ω–µ—à–Ω–∏–µ API –Ω–µ–æ—Ç–∫–∞—Ç–Ω—ã–µ
* —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ—â–Ω–∞—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
* –æ—à–∏–±–∫–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Ç–∞—â–∏—Ç—å—Å—è —Ü–µ–ø–æ—á–∫–æ–π

---

# üß≠ –ë–õ–û–ö 5. –û–†–ö–ï–°–¢–†–ê–¶–ò–Ø vs –•–û–†–ï–û–ì–†–ê–§–ò–Ø (4‚Äì5 –º–∏–Ω)

–û–±—ä—è—Å–Ω—è–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∑–∞–∫–∞–∑–∞.

## 1. –•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è (event-driven)

```mermaid
graph LR
A[Billing] -->|event: MoneyWithdrawn| B[Inventory]
B -->|event: GoodsReserved| C[Orders]
```

–ü–ª—é—Å—ã:

* –ø—Ä–æ—Å—Ç–æ
* –Ω–µ –Ω—É–∂–µ–Ω —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å

–ú–∏–Ω—É—Å—ã:

* —Ö–∞–æ—Å
* —Å–ª–æ–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å
* event-storm
* —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–µ

## 2. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (Saga Coordinator)

```mermaid
graph TD
O(Saga Orchestrator) --> Billing
O --> Inventory
O --> Orders
```

–ü–ª—é—Å—ã:

* –æ–¥–∏–Ω –º–æ–∑–≥ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º
* –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
* –ª–µ–≥–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å

–ú–∏–Ω—É—Å—ã:

* –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å

### –í—ã–≤–æ–¥:

> 95% —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥–æ–≤—ã—Ö —Å–∞–≥ –¥–µ–ª–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ ORCHESTRATOR.

---

# üß† –ë–õ–û–ö 6. Temporal, Camunda, Conductor (5‚Äì6 –º–∏–Ω)

–û–±—ä—è—Å–Ω—è–µ–º –Ω–µ –∫–∞–∫ ‚Äú–±–µ—Ä—ë–º –≥–æ—Ç–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç‚Äù, –∞ –ø–æ—á–µ–º—É —Ç–∞–∫–∏–µ —à—Ç—É–∫–∏ –≤–æ–æ–±—â–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.

–û–Ω–∏ —Ä–µ—à–∞—é—Ç —Ç–æ, —á—Ç–æ —Ä—É—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ù–ï —Ä–µ—à–∏—Ç:

‚úî –≥–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ —à–∞–≥–∞
‚úî –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Ç—Ä–∞–∏
‚úî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∞–≥–∏
‚úî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã
‚úî –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
‚úî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
‚úî –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚úî –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ workflow

–ü—Ä–∏–º–µ—Ä –¥–ª—è Temporal:

* workflow –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–æ–¥
* Temporal —Ö—Ä–∞–Ω–∏—Ç state
* Temporal –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç retry
* Temporal –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç recovery

–°–∞–≥–∏ –Ω–∏—á–µ–≥–æ ‚Äú–Ω–µ —É–ø—Ä–æ—â–∞—é—Ç‚Äù, –Ω–æ –¥–µ–ª–∞—é—Ç –∏—Ö —Ä–µ–∞–ª–∏–∑—É–µ–º—ã–º–∏.

---

# üß± –ë–õ–û–ö 7. Outbox Pattern + CDC (5‚Äì6 –º–∏–Ω)

–≠—Ç–æ **–º–∞—Å—Ç-—Ö—ç–≤** —Ç–µ–º–∞, –±–µ–∑ –∫–æ—Ç–æ—Ä–æ–π –ª—é–±–∞—è —Å–∞–≥–∞ –ª–æ–º–∞–µ—Ç—Å—è.

–ë–æ–ª—å:

* ‚Äú–ú—ã –∑–∞–ø–∏—Å–∞–ª–∏ –≤ –ë–î, –Ω–æ —Å–æ–±—ã—Ç–∏–µ –≤ Kafka –ø–æ—Ç–µ—Ä—è–ª–æ—Å—å‚Äù
* ‚ÄúKafka —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∞ —Å–æ–±—ã—Ç–∏–µ, –∞ –≤ –ë–î –µ–≥–æ –Ω–µ—Ç‚Äù

Outbox —Ä–µ—à–∞–µ—Ç —ç—Ç–æ:

```mermaid
graph LR
A[Service] -->|insert| B[(DB)]
B --> C[Outbox Table]
C -->|CDC| D[Kafka]
```

–ú–µ—Ö–∞–Ω–∏–∑–º:

1. –ü–∏—à–µ–º –¥–∞–Ω–Ω—ã–µ + –∑–∞–ø–∏—Å—å –≤ outbox –≤ –æ–¥–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
2. Debezium —á–∏—Ç–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Kafka.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* –Ω–µ—Ç –¥—É–±–ª–µ–π
* –Ω–µ—Ç –ø–æ—Ç–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏–π
* –Ω–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–æ–≤
* —Å—Ç—Ä–æ–≥–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—é –ë–î

–í 2025 –≥–æ–¥—É ‚Äî MUST-HAVE.

---

# üîÅ –ë–õ–û–ö 8. Idempotency (3‚Äì4 –º–∏–Ω)

Idempotency ‚Äî –æ—Å–Ω–æ–≤–∞ –≤—Å–µ–≥–æ.

–û–±—ä—è—Å–Ω—è–µ–º:

> –ï—Å–ª–∏ —Ç–≤–æ—è –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞ ‚Äî –æ–Ω–∞ –ù–ï –ú–û–ñ–ï–¢ –±—ã—Ç—å —á–∞—Å—Ç—å—é —Å–∞–≥–∏.

–ü—Ä–∏–º–µ—Ä—ã:

* —Å–ø–∏—Å–∞–Ω–∏–µ –¥–µ–Ω–µ–≥ ‚Üí –≤—Å–µ–≥–¥–∞ —Å operation_id
* –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ ‚Üí –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–ø–∏—Å—ã–≤–∞—Ç—å —Å–Ω–æ–≤–∞
* –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ —Ç–æ–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã
* API –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–µ—Ç—Ä–∞–∏—Ç—å

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (Symfony):

```php
if ($repo->hasProcessed($operationId)) {
    return SavedState::OK;
}

$repo->markProcessed($operationId);
$billing->withdraw($userId, $amount);
```

---

# üî• –ë–õ–û–ö 9. –¢–∏–ø–∏—á–Ω—ã–µ —Ñ–µ–π–ª—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (3‚Äì5 –º–∏–Ω)

–ù—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –±–æ–ª–∏.

* –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞
* –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —á–∞—Å—Ç–∏—á–Ω–æ
* –≤–Ω–µ—à–Ω—è—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–ª–∞
* –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —É–º–µ—Ä
* duplicate messages
* duplicate compensation
* message reordering
* dead-letter queue –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è
* ‚Äú—É–∂–µ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ, –Ω–æ –µ—â—ë –Ω–µ –æ–ø–ª–∞—á–µ–Ω–æ‚Äù
* race condition –º–µ–∂–¥—É —à–∞–≥–∞–º–∏

---

# üö´ –ë–õ–û–ö 10. –ö–æ–≥–¥–∞ Saga –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç (2 –º–∏–Ω)

* –¥–µ–Ω–µ–∂–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≥–¥–µ rollback –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º
* high-frequency trading, –≥–¥–µ latency –∫—Ä–∏—Ç–∏—á–Ω–∞
* —Å—Ü–µ–Ω–∞—Ä–∏–∏ –±–µ–∑ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
* –æ–ø–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è —è–¥—Ä–∞: ACL, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, security
* —Å—Ü–µ–Ω–∞—Ä–∏–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –ø–æ–ª–Ω–æ–≥–æ ACID

---

# üîÅ –ë–õ–û–ö 11. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã Saga (2‚Äì3 –º–∏–Ω)

–î–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, —á—Ç–æ–±—ã –∑—Ä–∏—Ç–µ–ª—å –ø–æ–Ω—è–ª:
**—Å–∞–≥–∞ ‚Äî –Ω–µ —Å–µ—Ä–µ–±—Ä—è–Ω–∞—è –ø—É–ª—è.**

### ‚úî Try-Confirm-Cancel (TCC)

* –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
* –∏–º–µ–µ—Ç explicit prepare state

### ‚úî Event Sourcing

* —Å–æ—Å—Ç–æ—è–Ω–∏–µ = –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π
* –æ—Ç–∫–∞—Ç = –µ—â—ë –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ

### ‚úî Transactional Outbox

* —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ must-have –¥–ª—è –≤—Å–µ—Ö EDA —Å–∏—Å—Ç–µ–º

### ‚úî Dual writes avoidance

* ‚Äú–Ω–µ –¥–µ–ª–∞–π –∑–∞–ø–∏—Å—å –≤ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ‚Äù
* –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π —á–µ—Ä–µ–∑ –∂—É—Ä–Ω–∞–ª ‚Üí CDC

---

# üìö –ë–õ–û–ö 12. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–∏—è (—Å–ø–∏—Å–æ–∫)

–ü—Ä—è–º must-read:

* ‚ÄúLife Beyond Distributed Transactions‚Äù ‚Äî Pat Helland
* ‚ÄúSagas‚Äù ‚Äî 1987 (!) Hector Garcia-Molina
* Kleppmann ‚Äî DDIA
* Netflix Conductor docs
* Temporal: ‚ÄúRetry Semantics‚Äù
* Uber Payments architecture

---

# üèÅ –§–ò–ù–ê–õ

Distributed transactions ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ ACID.
–ò –Ω–µ –ø—Ä–æ ‚Äú–∫–∞–∫ –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –Ω–∞–∑–∞–¥‚Äù.

–≠—Ç–æ –ø—Ä–æ:

* —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö–∞–æ—Å–æ–º,
* –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ workflow,
* –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å,
* –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–±—ã—Ç–∏–π,
* –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏–∑ –ª—é–±–æ–π –∂–æ–ø—ã.

–°–∞–≥–∏ –Ω–µ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã ‚Äî
–æ–Ω–∏ –¥–µ–ª–∞—é—Ç –∏—Ö **–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º–∏**.

–ò –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –≤–µ—Å—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ–¥ –¥–µ—Ä–∂–∏—Ç—Å—è –Ω–∞:

* Saga orchestration
* Outbox + CDC
* Idempotent operations
* Temporal-like workflow engines

–ù–∞ —ç—Ç–æ–º –±–ª–æ–∫ –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å.
