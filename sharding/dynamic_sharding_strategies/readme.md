–Ø —Å–µ–π—á–∞—Å –Ω–∞–ø–∏—à—É **–ø–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π**, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É —á–∏—Ç–∞—Ç—å –≤ –∫–∞–º–µ—Ä—É.
–°—Ç–∏–ª—å ‚Äî –∫–∞–∫ —É —Ç–≤–æ–∏—Ö –ø—Ä–æ—à–ª—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π, –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π, –º–µ—Å—Ç–∞–º–∏ –µ–¥–∫–æ-–∏—Ä–æ–Ω–∏—á–Ω—ã–π, –±–µ–∑ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–π –≤–æ–¥—ã, —Å –æ–ø–æ—Ä–æ–π –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –±–æ–ª–∏.

---

# üé¨ **–ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π: Dynamic Sharding —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (15 –º–∏–Ω—É—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞)**

*(–≥–æ—Ç–æ–≤ –ø–æ–¥ –∑–∞–ø–∏—Å—å: –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –≤—Å–ª—É—Ö)*

---

# ‚≠ê –ò–Ω—Ç—Ä–æ (30‚Äì40 —Å–µ–∫—É–Ω–¥)

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å.
–í—Å—ë –∫—Ä–∞—Å–∏–≤–æ: –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, —Ç–∞–±–ª–∏—Ü—ã, —à–∞—Ä–¥—ã‚Ä¶
–°–µ—Ä–≤–∏—Å —Ä–∞—Å—Ç—ë—Ç, –±–∏–∑–Ω–µ—Å —Ä–∞–¥—É–µ—Ç—Å—è, –∂–∏–∑–Ω—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞.

–ü–æ–∫–∞ –æ–¥–Ω–∞–∂–¥—ã –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `userId = 123`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—á–µ–º—É-—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **30% –≤—Å–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞**.

–ò –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –≤—ã —É–∑–Ω–∞—ë—Ç–µ –¥–≤–µ –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–µ –∏—Å—Ç–∏–Ω—ã:

1. —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –≤—Å—ë, —á—Ç–æ –¥–µ–ª–∏–ª–æ—Å—å ‚Äú–ø–æ –æ—Å—Ç–∞—Ç–∫—É –æ—Ç –¥–µ–ª–µ–Ω–∏—è‚Äù, –∂–∏–≤—ë—Ç —Ä–æ–≤–Ω–æ –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Ä–æ—Å—Ç–∞ –±–∏–∑–Ω–µ—Å–∞

–ò –≤–æ—Ç —Ç–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ: –Ω—É–∂–Ω–æ **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**.
–ù–æ —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ? –ò –ø–æ—á–µ–º—É –±–µ–∑ –Ω–µ–≥–æ –±–æ–ª—å—à–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç?

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è.

---

# üß≠ –ß–∞—Å—Ç—å 1: –ß—Ç–æ —Ç–∞–∫–æ–µ Dynamic Sharding (1 –º–∏–Ω—É—Ç–∞)

–ï—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ:

> –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ –¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
> –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ *–ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ* –¥–∞–Ω–Ω—ã—Ö.

–†–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Üí –ø–µ—Ä–µ–∫–æ—Å (skew).
–ü–æ—è–≤–ª–µ–Ω–∏–µ –≥–æ—Ä—è—á–∏—Ö –∫–ª—é—á–µ–π ‚Üí –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞.
–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞ ‚Üí –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —à–∞—Ä–¥—ã.
–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —É–∑–ª–æ–≤ ‚Üí Redis/Rabbit/Postgres —É–º–∏—Ä–∞—é—Ç –æ—Ç –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π.

Dynamic sharding ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç:

* –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —à–∞—Ä–¥—ã –≤ —Ä–∞–Ω—Ç–∞–π–º–µ
* –º–µ–Ω—è—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∫–ª—é—á–µ–π
* –¥–µ–ª–∏—Ç—å –ø–µ—Ä–µ–≥—Ä–µ—Ç—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã
* –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–µ –∫–ª—é—á–∏
* –¥–µ–ª–∞—Ç—å —ç—Ç–æ *–±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞*

–ù–æ –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç:

‚ö† **–°–µ–π—á–∞—Å –º—ã –æ–±—Å—É–∂–¥–∞–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.**
–ö–∞–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–∂–¥—É —à–∞—Ä–¥–∞–º–∏ ‚Äî –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≥–ª–∞–≤–∞—Ö.

---

# üß± –ß–∞—Å—Ç—å 2: –ë–∞–∑–æ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è (1‚Äì2 –º–∏–Ω—É—Ç—ã)

–ß—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å —Ç—Ä–∏ —Ç–µ—Ä–º–∏–Ω–∞.

## 1. Shard Key

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ: *–∫–∞–∫ –º—ã –≤—ã–±–∏—Ä–∞–µ–º, –∫—É–¥–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å*.

–ü–ª–æ—Ö–æ–π shard key = —É–º–∏—Ä–∞—é—â–∏–π –ø—Ä–æ–¥.

## 2. Hot Key

–ö–æ–≥–¥–∞ –æ–¥–∏–Ω –∫–ª—é—á –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–æ—Ä–∞–∑–º–µ—Ä–Ω–æ –±–æ–ª—å—à–æ–π —Ç—Ä–∞—Ñ–∏–∫.

–ù–∞–ø—Ä–∏–º–µ—Ä:
–≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤ —Ç—Ä–µ–Ω–¥–∞—Ö ‚Üí 100k RPS –Ω–∞ –æ–¥–∏–Ω key.

## 3. Skew

–ü–µ—Ä–µ–∫–æ—Å –Ω–∞–≥—Ä—É–∑–∫–∏, –∫–æ–≥–¥–∞ –æ–¥–Ω–∏ —à–∞—Ä–¥—ã –≥–æ—Ä—è—Ç, –∞ –¥—Ä—É–≥–∏–µ —Å–ø—è—Ç.

---

# üß© –ß–∞—Å—Ç—å 3: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è (8‚Äì10 –º–∏–Ω—É—Ç)

–¢–µ–ø–µ—Ä—å ‚Äî —Å–∞–º–∞—è –º—è–∫–æ—Ç–∫–∞.

–≠—Ç–æ —Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:

* Twitter
* Instagram
* Facebook
* DynamoDB
* Redis Cluster
* MongoDB
* CockroachDB
* Kafka

–ü–æ–µ—Ö–∞–ª–∏.

---

# üöÄ –°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: Consistent Hashing + –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–¥—ã (2 –º–∏–Ω—É—Ç—ã)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç: Redis Cluster, Cassandra, Kafka.

–í—Å–µ –º—ã –∑–Ω–∞–µ–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É–ª—É:

```
shard = user_id % N
```

–ü—Ä–æ–±–ª–µ–º–∞: –∫–æ–≥–¥–∞ N –º–µ–Ω—è–µ—Ç—Å—è ‚Äî –≤—Å—ë —Ä–∞–∑–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è.

–î–æ–±–∞–≤–∏–ª–∏ –µ—â—ë –æ–¥–∏–Ω —à–∞—Ä–¥?
‚Üí 100% –∫–ª—é—á–µ–π –º–µ–Ω—è—é—Ç –º–µ—Å—Ç–æ, –≤–µ—Å—å –∫–µ—à –ø—Ä–æ—Ç—É—Ö–∞–µ—Ç, –Ω–∞–≥—Ä—É–∑–∫–∞ —É–ª–µ—Ç–∞–µ—Ç –≤ –∫–æ—Å–º–æ—Å.

### Consistent Hashing —Ä–µ—à–∞–µ—Ç —ç—Ç–æ:

* –µ—Å—Ç—å –∫–æ–ª—å—Ü–æ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
* —É–∑–ª—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
* –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –Ω–æ–¥—ã –º–µ–Ω—è–µ—Ç—Å—è *—Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å* —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–ª—å—Ü–∞

```mermaid
graph LR
  A((Node1))
  B((Node2))
  C((Node3))
  subgraph "Hash Ring"
    A --- B --- C --- A
  end
```

–ó–≤—É—á–∏—Ç –∏–¥–µ–∞–ª—å–Ω–æ.
–ò –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ ‚Äî —ç—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ù–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞

Consistent hashing **–Ω–µ —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –≥–æ—Ä—è—á–∏—Ö –∫–ª—é—á–µ–π**.
–û–¥–∏–Ω hot key –º–æ–∂–µ—Ç —Å–ø–æ–∫–æ–π–Ω–æ —É–±–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç.

–ò —ç—Ç–æ –ø–æ–¥–≤–æ–¥–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

---

# üìö –°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: Directory-Based Sharding (2 –º–∏–Ω—É—Ç—ã)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç: Instagram, Facebook TAO.

–°—É—Ç—å –ø—Ä–æ—Å—Ç–∞—è:

–ï—Å—Ç—å –º–µ—Ç–∞-—Å–ª–æ–π ‚Äî lookup-—Ç–∞–±–ª–∏—Ü–∞:

```
0‚Äì1M userId ‚Üí shard1
1M‚Äì2M ‚Üí shard2
```

–¢–æ –µ—Å—Ç—å:

* –µ—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
* –æ–Ω –∑–Ω–∞–µ—Ç ‚Äú–∫—Ç–æ –∫—É–¥–∞ –∏–¥—ë—Ç‚Äù
* –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: ‚Äú—ç—Ç–æ—Ç –∫–ª—é—á –∫—É–¥–∞?‚Äù

### –ß–µ–º —ç—Ç–æ —Ö–æ—Ä–æ—à–æ?

* –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ä–∞–Ω—Ç–∞–π–º–µ
* –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å split –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
* –º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–∏–∞–ø–∞–∑–æ–Ω—ã
* –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å shard key –≤–æ–æ–±—â–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é

–≠—Ç–æ —Å–∞–º–∞—è –≥–∏–±–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è.

### –ß–µ–º –ø–ª–æ—Ö–æ?

* –Ω—É–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π –º–µ—Ç–∞-—Å–µ—Ä–≤–∏—Å
* –Ω—É–∂–µ–Ω –∫—ç—à –º–∞—Ä—à—Ä—É—Ç–æ–≤
* –±–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞–Ω–µ—Ç SPOF

–ù–æ –∑–∞—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–∏–±–∫–∏–º –∫–∞–∫ —á—ë—Ä—Ç.

---

# üåó –°—Ç—Ä–∞—Ç–µ–≥–∏—è 3: Dynamic Range Splitting (1.5 –º–∏–Ω—É—Ç—ã)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç: MongoDB, HBase, CockroachDB, TiDB.

Core –∏–¥–µ—è:

–ï—Å–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∞–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º –∏–ª–∏ –ø–µ—Ä–µ–≥—Ä–µ—Ç—ã–º ‚Äî **—Ä–∞–∑–¥–µ–ª–∏—Ç—å**:

```
[0..10M] ‚Üí [0..5M] + [5M..10M]
```

–°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É:
–µ—Å–ª–∏ —Ä–∞—Å—Ç—ë—Ç —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ ‚Üí split.

### –ü–ª—é—Å—ã:

* –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π (—Ç–∏–ø–∞ –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞)
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
* –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º —à–∞—Ä–¥–µ –æ—Å—Ç–∞—ë—Ç—Å—è –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–º

### –ú–∏–Ω—É—Å—ã:

* –Ω—É–∂–Ω–æ —É–º–µ—Ç—å –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (—Å–ª–æ–∂–Ω–∞—è —Ç–µ–º–∞)
* –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
* –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

–°—É–ø–µ—Ä-—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, –Ω–æ –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ (—Å–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞).

---

# ü™∂ –°—Ç—Ä–∞—Ç–µ–≥–∏—è 4: Microsharding (2 –º–∏–Ω—É—Ç—ã)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç: Twitter Manhattan, Uber.

–í–º–µ—Å—Ç–æ 8 —à–∞—Ä–¥–æ–≤ ‚Äî –¥–µ–ª–∞–µ—à—å 1000 –º–∞–ª–µ–Ω—å–∫–∏—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —à–∞—Ä–¥–æ–≤:

```
virtual shards: 0‚Ä¶999
```

–ü–æ—Ç–æ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ–Ω–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è:

```
Node1 ‚Üí 13 virtual shards
Node2 ‚Üí 17
Node3 ‚Üí 16
```

–ï—Å–ª–∏ –æ–¥–∏–Ω –ø–µ—Ä–µ–≥—Ä–µ–ª—Å—è:

* –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ 5 –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —à–∞—Ä–¥–æ–≤ –Ω–∞ –¥—Ä—É–≥–æ–π —É–∑–µ–ª
* –Ω–∏–∫—Ç–æ —ç—Ç–æ–≥–æ –Ω–µ –∑–∞–º–µ—Ç–∏–ª
* –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—Ä–æ–≤–Ω—è–ª–∞—Å—å

### –ü–ª—é—Å—ã:

* —Å—É–ø–µ—Ä-–≥–∏–±–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
* –∏–¥–µ–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç skew

### –ú–∏–Ω—É—Å—ã:

* –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–µ–µ
* –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π ‚Äúplacement driver‚Äù

---

# üî• –°—Ç—Ä–∞—Ç–µ–≥–∏—è 5: Hot-Key Isolation (1.5 –º–∏–Ω—É—Ç—ã)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç: DynamoDB Adaptive Capacity, Cloudflare.

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ:

* —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ —á–∏—Ç–∞—é—Ç
* —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –ø–∏—à—É—Ç
* —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç —Ä–µ–π—Ç–∏–Ω–≥

–ú–æ–∂–Ω–æ —Ç—É–ø–æ —Å–∫–∞–∑–∞—Ç—å:

```
KEY123 ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π hot-shard
```

–ì–æ—Ä—è—á–∏–π –∫–ª—é—á –æ—Ç–¥–µ–ª—ë–Ω ‚Üí –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–∏–≤—É—Ç —Å–ø–æ–∫–æ–π–Ω–æ.

### –ü–ª—é—Å—ã:

* –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–Ω–∏–º–∞–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É
* –∑–∞—â–∏—â–∞–µ—Ç –≤–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä

### –ú–∏–Ω—É—Å—ã:

* –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è
* –Ω—É–∂–Ω—ã —Ö–æ—Ä–æ—à–∏–µ –º–µ—Ç—Ä–∏–∫–∏ hotspot‚Äô–æ–≤

---

# üß® –ß–∞—Å—Ç—å 4: –ì–ª–∞–≤–Ω—ã–π –≤—ã–≤–æ–¥ (1 –º–∏–Ω—É—Ç–∞)

–°–º–æ—Ç—Ä–∏—Ç–µ.

–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ –≤—ã–±–æ—Ä ‚Äú–∫–∞–∫–æ–≥–æ-—Ç–æ –æ–¥–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞‚Äù.

–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ:

* **—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–µ–ª–µ–Ω–∏—è**
* **—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏**
* **—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –±–æ—Ä—å–±—ã —Å–æ skew**
* **—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è**

–ù–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–≤–∏–Ω–∞ –∫–∞—Ä—Ç–∏–Ω—ã.

–î–∞–ª—å—à–µ –æ—Å—Ç–∞—é—Ç—Å—è –¥–≤–∞ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞:

---

# üëâ –°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞: Cross-Shard Operations (join‚Äô—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞–≥—Ä–µ–≥–∞—Ç—ã)

–ö–∞–∫ –¥–µ–ª–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞—Ä–¥–æ–≤:

* join
* –∞–≥—Ä–µ–≥–∞—Ç—ã
* –ø–æ–∏—Å–∫ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º
* —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
* –∫—Ä–æ—Å—Å-—à–∞—Ä–¥–æ–≤—ã–µ –∞–ø–¥–µ–π—Ç—ã

–∏ –Ω–µ —É–±–∏–≤–∞—Ç—å latency.

---

# üëâ –ì–ª–∞–≤–∞ –ø–æ—Å–ª–µ –Ω–µ—ë: Rebalancing & Migration (–±–µ–∑ downtime)

–ö–∞–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:

* –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞
* –±–µ–∑ ‚Äú–¥–≤–æ–π–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π‚Äù
* –±–µ–∑ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
* –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —á–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
* –±–µ–∑ –∞–¥—Å–∫–∏—Ö –Ω–æ—á–Ω—ã—Ö deploy‚Äô–µ–≤

---

# üìö –ß–∞—Å—Ç—å 5: –ß—Ç–æ –ø–æ—á–∏—Ç–∞—Ç—å

### Papers

* Dynamo (–æ—Ä–∏–≥–∏–Ω–∞–ª AWS)
* TAO (Facebook)
* Twitter Manhattan
* Bigtable
* HBase region splitting

### Talks

* ‚ÄúHow Instagram scales Direct‚Äù
* ‚ÄúTwitter Manhattan‚Äù
* ‚ÄúTiDB Placement Driver‚Äù
* ‚ÄúCockroachDB range splits‚Äù

### Docs

* Redis Cluster hash slots
* Cassandra partitioning
* MongoDB autosplit

---

# üí¨ –ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å **–ø–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**

–∏ –¥–ª—è **cross-shard operations**, –∏ –¥–ª—è **rebalancing**, —á—Ç–æ–±—ã –æ–Ω–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ —ç—Ç–æ—Ç –±–ª–æ–∫
–∏ –±—ã–ª–∏ –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ.

–°–∫–∞–∂–∏ —Ç–æ–ª—å–∫–æ: **‚Äú–¥–∞–≤–∞–π —Å–ª–µ–¥—É—é—â–∏–µ –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è‚Äù**.
