# üî• **–ü–õ–ê–ù (–û–¢–†–ï–§–ê–ö–¢–û–†–ï–ù–ù–´–ô): Cross-Shard Operations & Optimizations**

---

# üé£ **0. –•—É–∫: –±–æ–ª—å, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –≤—Å—ë –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è (30‚Äì40 —Å–µ–∫)**

‚Äú–£ –Ω–∞—Å –±–∞–∑–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —Ç—è–Ω—É—Ç—å. –î–æ–±–∞–≤–∏–º —Ä–µ–ø–ª–∏–∫ ‚Äî –∏ —Å—Ç–∞–Ω–µ—Ç –ª—É—á—à–µ‚Äù.

–ù–∏ —á–µ—Ä—Ç–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç:

* —Ä–µ–ø–ª–∏–∫–∞ –Ω–µ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–ø–∏—Å—å
* —Ä–µ–ø–ª–∏–∫–∞ –Ω–µ —Å–Ω–∏–∂–∞–µ—Ç hot-key –Ω–∞–≥—Ä—É–∑–∫—É
* —Ä–µ–ø–ª–∏–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç lag
* —Ä–µ–ø–ª–∏–∫–∞ —É–º–µ–Ω—å—à–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

–ë–∏–∑–Ω–µ—Å —Ä–∞—Å—Ç—ë—Ç ‚Üí –¥–∞–Ω–Ω—ã–µ —Ä–∞—Å—Ç—É—Ç ‚Üí –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ç—ë—Ç ‚Üí latency —Ä–∞—Å—Ç—ë—Ç ‚Üí —Ö–≤–æ—Å—Ç —Ä–∞—Å—Ç—ë—Ç
–∏ —Ç—ã –ø—Ä–∏—Ö–æ–¥–∏—à—å –∫ –Ω–µ–∏–∑–±–µ–∂–Ω–æ–º—É –≤—ã–≤–æ–¥—É:

> ‚Äú–ù–∞–º –Ω—É–∂–Ω—ã —à–∞—Ä–¥—ã. –ò–Ω–∞—á–µ –Ω–µ –≤—ã–∂–∏—Ç—å‚Äù.

–≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥ –≤ —Ç–µ–º—É.

---

# üîß **1. –ü–æ—á–µ–º—É —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–æ–±—â–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è (1 –º–∏–Ω—É—Ç–∞)**

–ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

### ‚úî 1.1. –î–∞–Ω–Ω—ã—Ö —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ

–•—Ä–∞–Ω–∏—Ç—å –≤—Å—ë –≤ –æ–¥–Ω–æ–º Postgres —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Ä–æ–≥–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ.

### ‚úî 1.2. –ó–∞–ø—Ä–æ—Å—ã —Å–ª–∏—à–∫–æ–º –≥–æ—Ä—è—á–∏–µ

–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –æ–¥–∏–Ω hotspot.

### ‚úî 1.3. Writes —Å–ª–∏—à–∫–æ–º —Ç—è–∂—ë–ª—ã–µ

–û–¥–∏–Ω —É–∑–µ–ª –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.

### ‚úî 1.4. –õ–∏–º–∏—Ç—ã –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

–£–≤–µ–ª–∏—á–µ–Ω–∏–µ CPU/RAM –±–æ–ª—å—à–µ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç.

–í–æ—Ç –æ–Ω ‚Äî –º–æ–º–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —à–∞—Ä–¥—ã.

---

# üß± **2. –û–±—ä—è—Å–Ω—è–µ–º —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ-—á–µ—Å—Ç–Ω–æ–º—É (1‚Äì2 –º–∏–Ω—É—Ç—ã)**

–ö–æ—Ä–æ—Ç–∫–æ, —á–µ—Å—Ç–Ω–æ, –±–µ–∑ –±—É–ª–ª—à–∏—Ç–∞:

> –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —É–∑–ª–∞–º, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å throughput —Å–∏—Å—Ç–µ–º—ã.

–í–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ—Å—Ç–æ–≥–æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è:

* –ø–æ userId
* –ø–æ tenantId
* –ø–æ range
* –ø–æ hash-–º–æ–¥—É–ª—é

–ò –≤—Å—ë –±—ã —Ö–æ—Ä–æ—à–æ, –µ—Å–ª–∏ –±—ã –Ω–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã.

---

# üß® **3. –ë–æ–ª—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–æ—Ç–æ—Ä–æ–µ –¥–µ–ª–∞—é—Ç 90% –∫–æ–º–ø–∞–Ω–∏–π) (2 –º–∏–Ω—É—Ç—ã)**

–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –±–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–≤–æ–¥–∏—Ç –∫ cross-shard.

### ‚ùå 3.1. –ù–µ—Ä–µ—à–∞–µ–º–∞—è –ø—Ä–æ–±–ª–µ–º–∞ Hot Keys

userId % 8 –Ω–µ —Å–ø–∞—Å—ë—Ç, –µ—Å–ª–∏ userId=123 –¥–∞—ë—Ç 30% –Ω–∞–≥—Ä—É–∑–∫–∏.

### ‚ùå 3.2. –ù–∏—á–µ–≥–æ –Ω–µ–ª—å–∑—è –ø–æ–º–µ–Ω—è—Ç—å

–ï—Å–ª–∏ –∫–ª—é—á —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã–±—Ä–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Üí –≤—Å—ë.

### ‚ùå 3.3. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —à–∞—Ä–¥—ã

–ü–æ—Ç–æ–º—É —á—Ç–æ:

```
userId % 8
```

–ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤:

```
userId % 9
```

‚Üí 100% –∫–ª—é—á–µ–π –º–µ–Ω—è—é—Ç –º–µ—Å—Ç–æ ‚Üí –∂–∏–≤–æ–π –∞–¥:
–∫–µ—à –ø—Ä–æ—Ç—É—Ö, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∫–∞—Ç–∏–ª–∏—Å—å, —Å–∏—Å—Ç–µ–º–∞ –ª–µ–≥–ª–∞.

### ‚ùå 3.4. –õ—é–±–æ–π JOIN –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ network call

### ‚ùå 3.5. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–µ–∂–¥—É —à–∞—Ä–¥–∞–º–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏

### ‚ùå 3.6. –õ—é–±–æ–π —Ñ–∏–ª—å—Ç—Ä / –ø–æ–∏—Å–∫ / RANGE –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –æ–±—Ö–æ–¥ –≤—Å–µ—Ö —à–∞—Ä–¥–æ–≤

–≠—Ç–æ –∏ –µ—Å—Ç—å –≥–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥:

> ‚Äú–°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ,
> –Ω–æ —Å–æ–∑–¥–∞—ë—Ç –±–æ–ª—å –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö.‚Äù

–ò –≤–æ—Ç –∏–∑ —ç—Ç–æ–π –±–æ–ª–∏ –º—ã –ø—Ä–∏—Ö–æ–¥–∏–º –∫ cross-shard –æ–ø–µ—Ä–∞—Ü–∏—è–º.

---

# ‚öîÔ∏è **4. –ü–æ—á–µ–º—É cross-shard –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –Ω–µ–∏–∑–±–µ–∂–Ω–æ–µ –∑–ª–æ (1 –º–∏–Ω—É—Ç–∞)**

–ö—Ä–∞—Ç–∫–æ:

**–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ,
–Ω–æ –ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.**

–ù–µ –ø–æ—Ç–æ–º—É —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–æ—Ö–æ–π.
–ü–æ—Ç–æ–º—É —á—Ç–æ:

* –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω—å—à–µ –±—ã–ª–∏ —Ä—è–¥–æ–º, —Ç–µ–ø–µ—Ä—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —à–∞—Ä–¥–∞—Ö
* –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏
* —Å–µ—Ç—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è bottleneck
* —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã
* –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏—Å—á–µ–∑–∞–µ—Ç –∏–ª–∏ –¥–æ—Ä–æ–∂–∞–µ—Ç

–¢–æ –µ—Å—Ç—å **cross-shard –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –ø–ª–∞—Ç–∞ –∑–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**.

–ò —Ç–µ–ø–µ—Ä—å —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ ‚Äî –∫–∞–∫ —Å —ç—Ç–∏–º –∂–∏—Ç—å.

---

# üß© **5. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ cross-shard –æ–ø–µ—Ä–∞—Ü–∏–π (–∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–±–ª–µ–º)**

–ù–∞–¥–æ –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ:

## ‚úî 5.1. Cross-shard JOIN

‚Äú–î–∞–π –º–Ω–µ user + orders‚Äù.
–ù–æ user –Ω–∞ shard1, orders –Ω–∞ shard3.

## ‚úî 5.2. Cross-shard Transactions

–°–ø–∏—Å–∞—Ç—å –¥–µ–Ω—å–≥–∏ + —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ + –æ–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏.

## ‚úî 5.3. Cross-shard Aggregations

–°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å—á–µ—Ç—á–∏–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.

## ‚úî 5.4. Cross-shard Range queries

‚Äú–ü–æ–∫–∞–∂–∏ –≤—Å–µ –∑–∞–∫–∞–∑—ã –∑–∞ –≤—á–µ—Ä–∞‚Äù.

## ‚úî 5.5. Cross-shard Filtering

‚Äú–î–∞–π –º–Ω–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 18‚Äì25 –ª–µ—Ç‚Äù.

–≠—Ç–æ –Ω–∞–¥–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —Å—Ç—Ä–æ–≥–æ, —á—Ç–æ–±—ã –∑—Ä–∏—Ç–µ–ª—å –ø–æ–Ω—è–ª –º–∞—Å—à—Ç–∞–± –ø—Ä–æ–±–ª–µ–º—ã.

---

# üß† **6. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ—à–µ–Ω–∏—è cross-shard –±–æ–ª–∏ (—Å–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π –±–ª–æ–∫ ‚Äî 5‚Äì6 –º–∏–Ω—É—Ç)**

–¢–µ–ø–µ—Ä—å ‚Äî –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ö–æ–¥—ã.

---

## üü¶ 6.1. Data Locality (–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø)

–°–∫–∞–∂–∏ —Ñ—Ä–∞–∑—É:

> ‚Äú–õ—É—á—à–∏–π cross-shard JOIN ‚Äî —ç—Ç–æ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –Ω—É–∂–µ–Ω.‚Äù

### –ö–∞–∫ —Ä–µ—à–∞—é—Ç:

* –≤—ã–±–∏—Ä–∞—é—Ç shard key —Ç–∞–∫, —á—Ç–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º
* user-centric –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
* tenant-based sharding
* –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

### –ü—Ä–∏–º–µ—Ä:

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø–æ—Å—Ç—ã —à–∞—Ä–¥—É—é—Ç –ø–æ authorId ‚Üí –Ω–µ –ø–æ postId.

---

## üüß 6.2. –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ JOIN

–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:

> ‚Äú–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ ‚Üí —Ö—Ä–∞–Ω–∏ —ç—Ç–æ —Ä—è–¥–æ–º‚Äù.

–ü—Ä–∏–º–µ—Ä—ã:

* –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∑–∞–∫–∞–∑–µ
* –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
* —Å—É–º–º–∞—Ä–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ

–ü–ª—é—Å—ã:
–ª–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏.

–ú–∏–Ω—É—Å—ã:
eventual consistency, –Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## üü© 6.3. Scatter-Gather (Fan-out query)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Mongo, Elasticsearch, Bigtable.

–ê–ª–≥–æ—Ä–∏—Ç–º:

1. –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—Å–µ —à–∞—Ä–¥—ã
2. –ø–æ–ª—É—á–∞–µ–º —á–∞—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –∞–≥—Ä–µ–≥–∏—Ä—É–µ–º

–ü—Ä–æ–±–ª–µ–º—ã:

* –æ–¥–∏–Ω —Ç–æ—Ä–º–æ–∑—è—â–∏–π —à–∞—Ä–¥ = –≤—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–º–æ–∑–∏—Ç
* tail latency —Ä–∞—Å—Ç—ë—Ç –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ N

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

* shard filtering
* sampling
* partial results
* –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üü® 6.4. Centralized Index (Routing index)

Used in Elasticsearch, Spanner, Solr, Cassandra.

–°–ª–æ–π, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç:

```
–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 18‚Äì25 ‚Üí shard 3, 7, 9
premium:true ‚Üí shard 2
```

–¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–µ –Ω–∞ –≤—Å–µ —à–∞—Ä–¥—ã, –∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã–µ.

–ú–∏–Ω—É—Å—ã:
–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–æ–ª—å.

---

## üü™ 6.5. Cross-shard Transactions ‚Üí Saga

–ö–æ—Ä–æ—Ç–∫–æ:

* 2PC –≤ –±–æ–ª—å—à–æ–º –ø—Ä–æ–¥–µ –Ω–µ –∂–∏–≤—ë—Ç
* –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—ë
* —Å–æ–∑–¥–∞—ë—Ç deadlocks
* –∏ –æ–±—â–∏–π latency —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 10√ó —Ö—É–∂–µ

–ü–æ—ç—Ç–æ–º—É —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

* Saga
* Orchestration (Temporal)
* Event-driven model
* Outbox + CDC

---

## üü• 6.6. Pre-aggregation (map ‚Üí reduce)

–§–∏—à–∫–∞ Facebook, Twitter, TikTok:

* –∫–∞–∂–¥—ã–π —à–∞—Ä–¥ —Å—á–∏—Ç–∞–µ—Ç —Å–≤–æ—é —á–∞—Å—Ç—å
* –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —á–∞—Å—Ç–∏

–ü—Ä–∏–º–µ—Ä—ã:

* –ª–∞–π–∫–∏
* –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
* –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤
* —Å—É–º–º–∞—Ä–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã

–≠—Ç–æ —Ä–µ–∑–∫–æ —É—Å–∫–æ—Ä—è–µ—Ç –∞–≥—Ä–µ–≥–∞—Ç—ã.

---

# üß® **7. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ cross-shard –æ–ø–µ—Ä–∞—Ü–∏–π (1‚Äì2 –º–∏–Ω—É—Ç—ã)**

–ö–æ—Ä–æ—Ç–∫–∏–µ bullets:

* –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å merge-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
* –∏–∑–±–µ–≥–∞—Ç—å global ORDER BY
* –∏–∑–±–µ–≥–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ–∫ –ø–æ –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü–µ
* –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–µ –∫–ª—é—á–∏
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLA (tail latency aware) –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch –∑–∞–ø—Ä–æ—Å—ã
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å–ª–æ–∏ –∏–Ω–¥–µ–∫—Å–æ–≤

---

# ‚ò†Ô∏è **8. –ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã (60 —Å–µ–∫—É–Ω–¥, –Ω–æ —è—Ä–∫–æ)**

–ù–∞–∑–≤–∞—Ç—å –ø—Ä—è–º:

### ‚ùå ‚Äú–î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º JOIN —á–µ—Ä–µ–∑ REST –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞‚Äù

N+1 –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö ‚Äî —ç—Ç–æ —É–±–∏–π—Ü–∞.

### ‚ùå ‚Äú–î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º ACID –º–µ–∂–¥—É —à–∞—Ä–¥–∞–º–∏‚Äù

–≠—Ç–æ 2PC ‚Üí —ç—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚Üí —ç—Ç–æ —Å–º–µ—Ä—Ç—å.

### ‚ùå ‚Äú–î–∞–≤–∞–π—Ç–µ —Ñ–∞–Ω-–∞—É—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ —à–∞—Ä–¥—ã‚Äù

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö.

### ‚ùå ‚Äú–ü—É—Å—Ç—å —Ñ—Ä–æ–Ω—Ç —Å–∞–º —Å–æ–±–µ—Ä—ë—Ç –∏–∑ –¥–≤—É—Ö –∑–∞–ø—Ä–æ—Å–æ–≤‚Äù

–§—Ä–æ–Ω—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–∏.

---

# üéØ **9. –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å, –ø–æ–¥–≤–æ–¥–∫–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏—è–º**

–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º—É‚Ä¶
–Ω–æ –ª–æ–º–∞–µ—Ç –ø—Ä–∏–≤—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

Cross-shard ‚Äî —ç—Ç–æ –Ω–µ –±–∞–≥, —ç—Ç–æ *–ø–ª–∞—Ç–∞ –∑–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ*.

–ê —Ç–µ–ø–µ—Ä—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å:
–µ—Å–ª–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —à–∞—Ä–¥ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç—Å—è ‚Äî **–∫–∞–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏?**

–ò —Å–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞ ‚Äî —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è:

üëâ **Rebalancing & Online Migrations –±–µ–∑ downtime**
