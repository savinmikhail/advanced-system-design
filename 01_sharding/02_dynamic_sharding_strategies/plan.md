# üî• **Dynamic Sharding Strategies ‚Äî —Å—Ü–µ–Ω–∞—Ä–∏–π / –ø–ª–∞–Ω –±–ª–æ–∫–∞ (12‚Äì15 –º–∏–Ω)**

*(–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π —Å —É—á—ë—Ç–æ–º —Ç–æ–≥–æ, —á—Ç–æ –¥–∞–ª—å—à–µ –∏–¥—É—Ç –±–ª–æ–∫–∏ –ø—Ä–æ cross-shard operations –∏ rebalancing)*

---

# üé£ 1. –•—É–∫: –∑–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —Å–º–µ—à–Ω—ã–º —Ä–æ–≤–Ω–æ –¥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –≤ –ø—Ä–æ–¥–µ –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç —Å userId = 123 –ø–µ—Ä–µ–≥—Ä–µ–≤–∞–µ—Ç –≤–µ—Å—å —à–∞—Ä–¥.
–¢—ã –¥–µ–ª–∏–ª –Ω–∞ 8 —á–∞—Å—Ç–µ–π, –∞ –ø–æ–ª—É—á–∏–ª:

* –æ–¥–∏–Ω –ø–µ—Ä–µ–≥—Ä–µ—Ç—ã–π —à–∞—Ä–¥
* —Å–µ–º—å –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö
* –∏ –±–∏–∑–Ω–µ—Å –Ω–æ–µ—Ç, —á—Ç–æ ‚Äú–º—ã –≤—ã—Ä–æ—Å–ª–∏, –ø–æ—á–µ–º—É –≤—Å—ë —Ç–æ—Ä–º–æ–∑–∏—Ç?‚Äù

–ë–æ–ª—å –ø–æ–Ω—è—Ç–Ω–∞: **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ —à–∞—Ä–¥–∞–º –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞—ë—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–º**.
–ò–º–µ–Ω–Ω–æ –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ *–Ω—É–∂–Ω–æ –∏–º–µ–Ω–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ*, –∞ –Ω–µ ‚ÄúuserId % N‚Äù.

---

# üéØ 2. –ß—Ç–æ —Ç–∞–∫–æ–µ Dynamic Sharding (–∫—Ä–∞—Ç–∫–æ –∏ —á–µ—Å—Ç–Ω–æ)

Dynamic sharding ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç:

* —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —à–∞—Ä–¥—ã –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞
* –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–ª—é—á–∏ –∏ –º–µ–Ω—è—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É

‚ö† –ù–æ –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ –º—ã –ù–ï –æ–±—Å—É–∂–¥–∞–µ–º
‚Üí –∫–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
‚Üí –∫–∞–∫ –¥–µ–ª–∞—Ç—å –æ–Ω–ª–∞–π–Ω —Ä–µ–±–∞–ª–∞–Ω—Å–∏–Ω–≥
‚Üí –∫–∞–∫ –æ–±—Ö–æ–¥–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —à–∞—Ä–¥–∞–º–∏

–≠—Ç–æ —Å–ª–µ–¥—É—é—â–∏–µ –≥–ª–∞–≤—ã.

–ó–¥–µ—Å—å ‚Äî —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ **–∫–∞–∫ –¥–µ–ª–∏—Ç—å**, –∞ –Ω–µ **–∫–∞–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å**.

---

# üß† 3. –ü–æ–Ω—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–¥–æ –¥–∞—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏

### ‚úî 3.1. –ß—Ç–æ —Ç–∞–∫–æ–µ shard key

–¢–æ, —á—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫—É–¥–∞ –ø–æ–ø–∞–¥—ë—Ç –∑–∞–ø–∏—Å—å.

–ü—Ä–æ–±–ª–µ–º–∞: –≤—ã–±–æ—Ä ‚Äú–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ‚Äù shard key ‚Äî 80% —É—Å–ø–µ—Ö–∞.

### ‚úî 3.2. –ì–æ—Ä—è—á–∏–µ –∫–ª—é—á–∏ (hot keys)

–ì–ª–∞–≤–Ω—ã–π —É–±–∏–π—Ü–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è.

### ‚úî 3.3. Hotspots / Skew

–ù–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

–≠—Ç–∏ —Ç—Ä–∏ —à—Ç—É–∫–∏ –¥–∞–¥—É—Ç –ª—é–¥—è–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ:
*–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ ‚Äî —ç—Ç–æ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã.*

---

# üîß 4. –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ Dynamic Sharding

*(—á–∏—Å—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ ‚Äî –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π –∏ –±–µ–∑ cross-shard)*

---

## ‚úî 4.1. **Consistent Hashing —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –Ω–æ–¥–∞–º–∏**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Redis Cluster, Cassandra, Envoy, Kafka.

–ü–æ—á–µ–º—É –ø–æ–ø—É–ª—è—Ä–Ω–∞:

* –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–¥—ã –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –∫–ª—é—á–µ–π
* –º–µ–Ω—å—à–µ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
* —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–ª–µ–Ω–∏–π

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

* hotspot –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–∞–µ—Ç
* –∫–ª—é—á–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –∫–æ–ª—å—Ü—É, –Ω–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–π

–ü–æ–¥–≤–æ–¥–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ:
‚Üí –¥–ª—è –±–æ—Ä—å–±—ã —Å hotspot –Ω—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –º–∏–≥—Ä–∞—Ü–∏–π.

---

## ‚úî 4.2. **Directory-Based Sharding (Lookup Table / Metadata service)**

–°–µ—Ä–≤–∏—Å —Ö—Ä–∞–Ω–∏—Ç –∫–∞—Ä—Ç—É:

```
user_id 0‚Äì1M     ‚Üí shard_1
user_id 1M‚Äì2M    ‚Üí shard_2
```

–ü–ª—é—Å—ã:

* —Å—É–ø–µ—Ä-–≥–∏–±–∫–æ
* –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ª–µ—Ç—É

–ú–∏–Ω—É—Å—ã:

* –Ω—É–∂–µ–Ω —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –º–µ—Ç–∞-—Å–µ—Ä–≤–∏—Å
* –Ω—É–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
* —Ä–∏—Å–∫ SPOF –±–µ–∑ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏

–ü–æ–¥–≤–æ–¥–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ:
‚Üí —Ç–∞–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–µ–ª–∞—é—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–¥–µ–ª—å–Ω–æ (—É–∫–∞–∂–µ–º –ø–æ–∑–∂–µ).

---

## ‚úî 4.3. **Dynamic Range Splitting (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–ª–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤)**

–ö–æ–≥–¥–∞ –¥–∏–∞–ø–∞–∑–æ–Ω –ø–µ—Ä–µ–≥—Ä–µ–≤–∞–µ—Ç—Å—è ‚Äî –æ–Ω –¥–µ–ª–∏—Ç—Å—è:

```
[0..1M] -> [0..500k] + [500k..1M]
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ MongoDB (autosplit), HBase, CockroachDB, TiDB.

–ü–ª—é—Å—ã:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Ä–æ—Å—Ç
* —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, ID)

–ú–∏–Ω—É—Å—ã:

* —Ç—Ä–µ–±—É–µ—Ç —Ö–æ—Ä–æ—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
* data movement ‚Äî –¥–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (—Å–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞)

–ü–æ–¥–≤–æ–¥–∫–∞:
‚Üí splitting ‚Äî —ç—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –Ω–æ —Ä–µ–±–∞–ª–∞–Ω—Å–∏–Ω–≥/–º–∏–≥—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º.

---

## ‚úî 4.4. **Microsharding (100‚Äì1000 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —à–∞—Ä–¥–æ–≤)**

–¢—ã —Å–æ–∑–¥–∞—ë—à—å –º–Ω–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —à–∞—Ä–¥–æ–≤:

```
virtual shards: 0‚Ä¶999
physical nodes: 5
```

–ò –º–æ–∂–µ—à—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏—Ö:

```
Node A ‚Üí 0,1,2,3
Node B ‚Üí 4,5,6,7
...
```

–ü–ª—é—Å—ã:

* –º–æ–∂–Ω–æ –≥–∏–±–∫–æ —Ä–∞—Å–∫–∏–¥—ã–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É
* –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –º–µ–ª–∫–∏–µ –∫—É—Å–æ—á–∫–∏
* –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

–ú–∏–Ω—É—Å—ã:

* —Å–ª–æ–∂–Ω–µ–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
* –Ω—É–∂–µ–Ω –º–µ—Ç–∞-—É—Ä–æ–≤–µ–Ω—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ–¥–≤–æ–¥–∫–∞:
‚Üí –¥–∞–ª—å—à–µ –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–∞–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å —Ç–∞–∫–∏–µ –º–∏–∫—Ä–æ—à–∞—Ä–¥—ã –±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞.

---

## ‚úî 4.5. **Hot-key Isolation / Adaptive Capacity**

–ï—Å–ª–∏ –æ–¥–∏–Ω –∫–ª—é—á —Å–æ–∑–¥–∞—ë—Ç 30% –Ω–∞–≥—Ä—É–∑–∫–∏:

‚Üí –≤—ã–¥–µ–ª—è–µ–º –µ–≥–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π tier:

```
KEY123 ‚Üí hot_shard_9
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ DynamoDB, Cloudflare KV.

–ü–ª—é—Å—ã:

* —Å–ø–∞—Å–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ ‚Äú–≤ –º–æ–º–µ–Ω—Ç–µ‚Äù

–ú–∏–Ω—É—Å—ã:

* –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å read path
* –Ω—É–∂–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ hotspot‚Äô–æ–≤

–≠—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è —Ñ–∏–≥—É—Ä–∞ –¥–ª—è –ø–æ–¥–≤–æ–¥–∫–∏ –∫ —Ç–µ–º–µ cross-shard –æ–ø–µ—Ä–∞—Ü–∏–π.

---

# üß® 5. –û—Å–Ω–æ–≤–Ω–æ–π –≤—ã–≤–æ–¥ –±–ª–æ–∫–∞

–°—Ç—Ä–∞—Ç–µ–≥–∏—è —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî —ç—Ç–æ –ø—Ä–æ:

* –∫–∞–∫ –¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ,
* –∫–∞–∫ –≤—ã–±–∏—Ä–∞—Ç—å shard key,
* –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É.

–ù–æ —ç—Ç–æ **–Ω–µ** –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:

* –∫–∞–∫ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞
* –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞—Ä–¥–æ–≤
* –∫–∞–∫ —Ä–µ—à–∞—Ç—å distributed transaction issues
* –∫–∞–∫ –¥–µ—Ä–∂–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —à–∞—Ä–¥–∞–º–∏
* –∫–∞–∫ –¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–±–∞–ª–∞–Ω—Å–∏–Ω–≥

–≠—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã —Ç—ã —Ä–∞–∑–±–∏—Ä–∞–µ—à—å –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –¥–≤—É—Ö —Å–µ–∫—Ü–∏—è—Ö.

–°—É–ø–µ—Ä-–ª–æ–≥–∏—á–Ω–æ.
