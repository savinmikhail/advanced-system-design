# üî• B. Throughput Scaling (–∫–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–º–∞–µ—Ç—Å—è –æ–± –∑–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏)


## üìå –ß—Ç–æ —Ç–∞–∫–æ–µ Throughput (–∏ —á–µ–º –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Latency)

–ï—Å—Ç—å –¥–≤–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã:

### **Latency ‚Äî –∫–∞–∫ –±—ã—Å—Ç—Ä–æ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å.**

–ò–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö.

### **Throughput ‚Äî —Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏.**

–ò–∑–º–µ—Ä—è–µ—Ç—Å—è –≤:

* RPS (requests per second),
* QPS (queries per second),
* ops/sec (–æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–µ–∫—É–Ω–¥—É),
* messages/sec (–¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π).

–ò –≤–æ—Ç —Ç—É—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–∞–º–æ–µ –≤–µ—Å—ë–ª–æ–µ.

---

## üß† –ü–æ—á–µ–º—É –ª—é–¥–∏ –ø—É—Ç–∞—é—Ç throughput –∏ latency?

–ü–æ—Ç–æ–º—É —á—Ç–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞:

* –µ—Å–ª–∏ throughput –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø—Ä–µ–¥–µ–ª —Å–∏—Å—Ç–µ–º—ã ‚Üí latency —Ä–∞—Å—Ç—ë—Ç
* –µ—Å–ª–∏ latency —Ä–∞—Å—Ç—ë—Ç ‚Üí –ø–∞–¥–∞–µ—Ç throughput
* –µ—Å–ª–∏ —Ä–∞—Å—Ç—ë—Ç concurrency ‚Üí —Ä–∞—Å—Ç—ë—Ç latency ‚Üí –ø–∞–¥–∞–µ—Ç throughput

–≠—Ç–æ –Ω–µ ‚Äú—Ä–∞–∑–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏‚Äù, —ç—Ç–æ **–¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã –æ–¥–Ω–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏**.

---

## üìê –ü—Ä–æ—Å—Ç–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```mermaid
graph TD
A[–ù–∞–≥—Ä—É–∑–∏–ª–∏ —Å–∏—Å—Ç–µ–º—É] --> B[–û—á–µ—Ä–µ–¥—å —Ä–∞—Å—Ç—ë—Ç]
B --> C[Latency ‚Üë]
C --> D[Throughput ‚Üì]
D --> E[–ï—â—ë –±–æ–ª—å—à–µ –æ—á–µ—Ä–µ–¥–∏]
E --> C
```

–≠—Ç–æ –∏ –µ—Å—Ç—å —Ü–∏–∫–ª –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## üìä –ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ (Little‚Äôs Law)

```
Latency = Concurrency / Throughput
```

–û–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è, –Ω–æ –æ–Ω–∞ —Ä–∞–∑—Ä—É—à–∞–µ—Ç –≤—Å–µ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –ø—Ä–æ ‚Äú–¥–∞–≤–∞–π—Ç–µ –ø–æ—Å—Ç–∞–≤–∏–º –µ—â—ë —Å–µ—Ä–≤–µ—Ä–æ–≤‚Äù.

**–ï—Å–ª–∏ –≤—Ö–æ–¥—è—â–∏–π –ø–æ—Ç–æ–∫ –±–æ–ª—å—à–µ, —á–µ–º —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å ‚Üí
latency —Ä–∞—Å—Ç—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–¥ –∏–¥–µ–∞–ª—å–Ω—ã–π.

---

## üî• –ü–æ—á–µ–º—É throughput ‚Äî —ç—Ç–æ –ø—Ä–æ ‚Äú—Å–∫–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –≤—ã–¥–µ—Ä–∂–∞—Ç—å‚Äù,

–∞ latency ‚Äî ‚Äú–∫–∞–∫ –±—ã—Å—Ç—Ä–æ –æ–Ω–∞ –æ—Ç–≤–µ—á–∞–µ—Ç‚Äù

–ü—Ä–∏–º–µ—Ä:

* Redis –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ 1‚Äì2 ms (–º–∞–ª–µ–Ω—å–∫–∞—è latency)
* –Ω–æ –Ω–∞ hot key –º–æ–∂–µ—Ç –≤—ã–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ 50‚Äì100k RPS (throughput –æ–≥—Ä–∞–Ω–∏—á–µ–Ω)

–ï—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç 200k RPS:

* latency —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 10ms
* –ø–æ—Ç–æ–º 50ms
* –ø–æ—Ç–æ–º 100ms
* –∏ –¥–∞–ª—å—à–µ Redis –Ω–∞—á–∏–Ω–∞–µ—Ç –¥—Ä–æ–ø–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–¢–æ –µ—Å—Ç—å:

> –î–∞–∂–µ –∏–¥–µ–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç *–∂—ë—Å—Ç–∫–∏–π –ø–æ—Ç–æ–ª–æ–∫ –ø–æ throughput*,
> –∏ –ø—Ä–∏ –µ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ latency –≤–∑—Ä—ã–≤–∞–µ—Ç—Å—è.

---

## üî• –ö—Ä–∞—Ç–∫–∞—è –∞–Ω–∞–ª–æ–≥–∏—è (–¥–ª—è UI)

**Latency** ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ *–æ–¥–Ω–æ–π* –º–∞—à–∏–Ω—ã –Ω–∞ –∫–∞—Å—Å–µ.
**Throughput** ‚Äî —Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –∫–∞—Å—Å–∞ –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏—Ç—å *–≤ –º–∏–Ω—É—Ç—É*.

–ï—Å–ª–∏ –ª—é–¥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∫–∞—Å—Å–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç:

* –æ—á–µ—Ä–µ–¥—å —Ä–∞—Å—Ç—ë—Ç
* –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è —Ä–∞—Å—Ç—ë—Ç
* throughput –Ω–µ —Ä–∞—Å—Ç—ë—Ç ‚Üí –∫–∞—Å—Å–∞ —É–ø—ë—Ä–ª–∞—Å—å
* –ª—é–¥–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –æ—Ä–∞—Ç—å –≤ —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ‚Äú–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–∞–≥–∞–µ—Ç!‚Äù

## 1. –ë–æ–ª—å

‚Äú–î–æ–±–∞–≤–∏–º –µ—â—ë —Å–µ—Ä–≤–µ—Ä–æ–≤ ‚Äî –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ‚Äù.
–ù–µ –±—É–¥–µ—Ç.

### –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

* –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç –Ω–µ–ª–∏–Ω–µ–π–Ω–æ
* –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏ –Ω–∞—Å—ã—â–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–¥–∞–µ—Ç
* –æ—á–µ—Ä–µ–¥–∏ –∑–∞–±–∏–≤–∞—é—Ç—Å—è
* –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º bottleneck
* –¥–∞–∂–µ 1 –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–µ–ª–∞–µ—Ç –≤–µ—Å—å —Å–µ—Ä–≤–∏—Å –º–µ–¥–ª–µ–Ω–Ω—ã–º

---

## 2. –ó–∞–∫–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å

### ‚úî 2.1. Amdahl‚Äôs Law

–ü–æ—Ç–æ–ª–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑-–∑–∞ –Ω–µ–ø–∞—Ä–∞–ª–ª–µ–ª—è—â–∏—Ö—Å—è —á–∞—Å—Ç–µ–π.

### ‚úî 2.2. Gustafson‚Äôs Law

–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å: –µ—Å–ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Å–∞–º–∞ –∑–∞–¥–∞—á–∞ ‚Äî –º–æ–∂–Ω–æ —Ä–∞—Å—Ç–∏—Ç—å throughput.

### ‚úî 2.3. Universal Scalability Law (Gunther)

–°–∞–º—ã–π –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π:

* –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è –∑–∞ shared —Ä–µ—Å—É—Ä—Å—ã
* overhead –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é
* –ø–æ—á–µ–º—É –ø–æ—Å–ª–µ N —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–µ—Ä—Ñ–æ–º–∞–Ω—Å –ø–∞–¥–∞–µ—Ç

### ‚úî 2.4. Little‚Äôs Law

–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–∫–æ–Ω –æ—á–µ—Ä–µ–¥–µ–π:

```
Latency = Concurrency / Throughput
```

---

## 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

### ‚úî 3.1. Convoy Effect

–û–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–µ—Ä–∂–∏—Ç lock ‚Üí –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤—Å—Ç–∞—é—Ç.

### ‚úî 3.2. Head-of-Line Blocking

–û–¥–∏–Ω —Ç–æ—Ä–º–æ–∑ –≤ –æ—á–µ—Ä–µ–¥–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ—Ö.

### ‚úî 3.3. Tail Amplification

–ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ö–≤–æ—Å—Ç —Ä–∞—Å—Ç—ë—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Å—Ä–µ–¥–Ω—è—è.

### ‚úî 3.4. Coordinated Omission

–ù–µ–≤–µ—Ä–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å–∫—Ä—ã–≤–∞—é—Ç —Ö–≤–æ—Å—Ç –∏ –¥–∞—é—Ç –ª–æ–∂–Ω—É—é —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.

---

## 4. –ü—Ä–∏–º–µ—Ä—ã –±–æ–ª–∏ (–∂–∏–≤—ã–µ, –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ)

* RabbitMQ –æ—á–µ—Ä–µ–¥—å –∑–∞–º–∏—Ä–∞–µ—Ç –∏–∑-–∑–∞ –æ–¥–Ω–æ–≥–æ slow consumer
* Redis –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç —Ç—è–Ω—É—Ç—å hot key –Ω–∞ allkeys-lru
* Postgres —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ row lock / index lock
* PHP-FPM –¥–æ—Å—Ç–∏–≥–∞–µ—Ç max_children ‚Üí –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–¥ –≤–æ—Ä–∫–µ—Ä–∞–º–∏
* Kafka partition lag —Ä–∞—Å—Ç—ë—Ç –∏–∑-–∑–∞ –æ–¥–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ consumer
* gRPC –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–µ—Ç—Ä–∞–∏—Ç—å ‚Üí load multiplies ‚Üí cluster death

---

## 5. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ—à–µ–Ω–∏—è

### ‚úî –ò–∑–±–µ–≥–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

* —É–±–∏—Ä–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ mutex‚Äô—ã
* –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å seq ID
* —É–±—Ä–∞—Ç—å centralized counters

### ‚úî Segregation of workloads

–ü–æ—Ç–æ–∫–∏ ‚Äú–ø–∏—Å—å–º–∞‚Äù –∏ ‚Äú—á—Ç–µ–Ω–∏—è‚Äù –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã.

### ‚úî –ò–∑–æ–ª—è—Ü–∏—è –≥–æ—Ä—è—á–∏—Ö –∫–ª—é—á–µ–π

* –æ—Ç–¥–µ–ª—å–Ω—ã–π Redis cluster tier
* microsharding
* L1 cache

### ‚úî Backpressure

–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å —Å–∫–∞–∑–∞—Ç—å ‚Äú—Ö–≤–∞—Ç–∏—Ç‚Äù.

### ‚úî Circuit Breakers

–ß—Ç–æ–±—ã –æ–¥–∏–Ω —É–º–∏—Ä–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å –Ω–µ —É–±–∏–ª –≤—Å–µ—Ö.

### ‚úî Replication vs Sharding

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –¥–∏–ª–µ–º–º–∞ ‚Äú—Å–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è‚Äù vs ‚Äú—Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏‚Äù.

