что такое latency
что такое thoughput
почему они важны - frustration -> money

их зависимость друг от друга - закон little
Очередь растёт → время ответа растёт.
```
Latency = Concurrency / Throughput
```

Пример:

* concurrency = 3000
* throughput = 1000 RPS

latency = 3 секунды.

объяснить пересентили
tail latency

чем распределеннее система тем больше хвост и его вероятность - дергается много запросов и неизбежно нарываешься
И в итоге p99 превращается в секунды, а то и минуты.


Откуда берутся хвосты (только практические причины)
Аппаратные
Сетевые
Программные


Пользовательский клиент ретраит
гейтвей ретраит
PHP ретраит
всё ретраит

И один хвостовой запрос превращается в:

> RETRY STORM

Есть два типа техник:

1. **Уменьшение хвоста** — сделать так, чтобы медленных запросов было меньше
2. **Маскировка/обход хвоста** — сделать так, чтобы медленные запросы не ломали всё подряд


Hedged Requests
Tied Requests (Связанные запросы) - чтоб лишнее время не ждать перед второй попыткой
Request Coalescing

Latency-aware Load Balancing - дает отдохнуть перегруженным
Deadline Propagation
circuit breaker
Background jittering
backpressure

Rate of retries
Queue length

Distributed tracing 

Alerting

ПОЧЕМУ “ДОБАВИМ СЕРВЕРОВ” НЕ РАБОТАЕТ

закон литтла
Закон Амдаля (Amdahl’s Law)
Закон Густафсона 
почему деградация - задержки на блокировки оркестрацию когеренность распределенные транзакции