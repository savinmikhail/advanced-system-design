
# üß® –ß—Ç–æ —Ç–∞–∫–æ–µ Tail Latency (–∏ –ø–æ—á–µ–º—É —ç—Ç–æ —Ç–µ–±—è –¥–æ–ª–∂–Ω–æ –≤–æ–ª–Ω–æ–≤–∞—Ç—å)


`Latency` ‚Äî –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

–°—Ä–µ–¥–Ω—è—è Latency ‚Äî —ç—Ç–æ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π CTO.
–ù–∞—Å—Ç–æ—è—â–∞—è –±–æ–ª—å –ª–µ–∂–∏—Ç –≤ —Ö–≤–æ—Å—Ç–∞—Ö: **p95 / p99 / p999**.

–≠—Ç–æ —Ç–µ *—Ä–µ–¥–∫–∏–µ* –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ:

* –≤–Ω–µ–∑–∞–ø–Ω–æ –µ–¥—É—Ç –≤–º–µ—Å—Ç–æ 20ms ‚Üí 400ms
* –∏–ª–∏ 2 —Å–µ–∫—É–Ω–¥—ã
* –∏–ª–∏ 10 —Å–µ–∫—É–Ω–¥ (–ø—Ä–∏–≤–µ—Ç, GC, —Å–µ—Ç—å, –¥–∏—Å–∫)
* –∏–ª–∏ –≤–æ–æ–±—â–µ —Ç–∞–π–º–∞—É—Ç—è—Ç

–ò —ç—Ç–∏ —Ä–µ–¥–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã **–ª–æ–º–∞—é—Ç UX, –æ—á–µ—Ä–µ–¥–∏, —Ç–∞–π–º–∞—É—Ç—ã, —Ä–µ—Ç—Ä–∞–∏, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É**, –∏ –∑–∞–æ–¥–Ω–æ —Ç–≤–æ—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.

---

–ü–æ—á–µ–º—É —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç—å?

# üìà –ú–∏–Ω–∏-–≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –≤–∏–∑—É–∞–ª–∞ (mermaid)
![img.png](img.png)

–í–æ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:

* 90% –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã—Å—Ç—Ä—ã–µ
* –Ω–æ —Ö–≤–æ—Å—Ç (p99, p999) –∂–∏–≤—ë—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é
* –∏ –∏–º–µ–Ω–Ω–æ –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

---

# ü•© –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–∞–¥–æ –ø–æ–Ω–∏–º–∞—Ç—å

## 1. –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ **–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ**

–ï—Å–ª–∏ –º–µ–¥–∏–∞–Ω–∞ (p50) = 20ms, –Ω–æ p99 = 1 —Å–µ–∫—É–Ω–¥–∞ ‚Äî
–∑–Ω–∞—á–∏—Ç 1% –∑–∞–ø—Ä–æ—Å–æ–≤ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ 50 —Ä–∞–∑.

–ò —ç—Ç–∏ 1%:

* –ª–æ–º–∞—é—Ç checkout
* —Ä–≤—É—Ç —Ü–µ–ø–æ—á–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
* –≤—ã–∑—ã–≤–∞—é—Ç retry storm
* —Å–æ–∑–¥–∞—é—Ç –æ—á–µ—Ä–µ–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—è–Ω—É—Ç –≤—Å—ë –≤–Ω–∏–∑
* –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–Ω–µ–∂–Ω—ã–π –∫–æ–º

---

## 2. Tail latency —Ä–∞—Å—Ç—ë—Ç –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏

Google –≤ —Å—Ç–∞—Ç—å–µ **"The Tail at Scale"** (—á–∏—Ç–∞–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –æ–Ω–æ –∫—É–ª—å—Ç–æ–≤–æ–µ) –ø–æ–∫–∞–∑–∞–ª:

> –ï—Å–ª–∏ —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 100 –±—ç–∫–µ–Ω–¥-–∑–∞–ø—Ä–æ—Å–æ–≤,
> —Ç–æ –≤–º–µ—Å—Ç–æ —Ç–≤–æ–µ–≥–æ p99 —Ç—ã –≤–∏–¥–∏—à—å p99^100.

–¢–æ –µ—Å—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π —Ö–≤–æ—Å—Ç ‚Üí –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ ‚Üí –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —á—É–¥–æ–≤–∏—â–µ.

üîó Google‚Äôs The Tail at Scale:
[https://research.google/pubs/the-tail-at-scale/](https://research.google/pubs/the-tail-at-scale/)

---

## 3. Tail latency —á–∞—Å—Ç–æ ‚Äú—Å–ª—É—á–∞–π–Ω–∞—è‚Äù, –Ω–æ –ø—Ä–∏—á–∏–Ω—ã –±–∞–Ω–∞–ª—å–Ω–æ –∑–µ–º–Ω—ã–µ

### –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ:

* GC –ø–∞—É–∑–∞
* CPU –Ω–µ–Ω–∞–¥–æ–ª–≥–æ –≤—ã–ª–µ—Ç–µ–ª –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á—É–∂–æ–π –ø—Ä–æ—Ü–µ—Å—Å
* –¥–∏—Å–∫ –¥–µ—Ä–Ω—É–ª—Å—è
* —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–∞–º—è—Ç–∏ –≤—ã–≥—Ä—É–∂–µ–Ω–∞
* NUMA –ø–µ—Ä–µ—Å–∫–æ—á–∏–ª–æ

### –°–µ—Ç–µ–≤—ã–µ:

* –æ–¥–∏–Ω –ø–ª–æ—Ö–æ–π hop
* –ø–∏–Ω–≥ –≤—Å–ø–ª–µ—Å–Ω—É–ª
* –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
* —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –∫–∞–Ω–∞–ª–µ

### –ù–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤:

* –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å ‚Äú–∑–∞–≤–∏—Å‚Äù
* hot key –±–ª–æ–∫–∏—Ä—É–µ—Ç —á—Ç–æ-—Ç–æ
* –ª–æ–∫ –≤–∏—Å–∏—Ç –¥–æ–ª—å—à–µ
* —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è 5MB JSON
* –æ–¥–∏–Ω shard –≤ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–π –ë–î —Ç–æ—Ä–º–æ–∑–∏—Ç

---

## 4. Tail latency —Ä–∞–∑—Ä—É—à–∞–µ—Ç –≤—Å—ë —Ü–µ–ø–æ—á–∫–∏ –≤—ã–∑–æ–≤–æ–≤

–ö–ª–∞—Å—Å–∏–∫–∞:

1. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ê –≤—ã–∑—ã–≤–∞–µ—Ç B
2. B –≤—ã–∑—ã–≤–∞–µ—Ç C
3. C –≤—ã–∑—ã–≤–∞–µ—Ç D

–ï—Å–ª–∏ —É D –ø99 = 500ms ‚Üí —É –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ ‚Äú–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å‚Äù —É–ª–µ—Ç–∞–µ—Ç.

–ê –ø–æ—Ç–æ–º:

* –≤–µ–∑–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Ç–∞–π–º–∞—É—Ç—ã
* –∏–¥—É—Ç —Ä–µ—Ç—Ä–∞–∏
* –Ω–∞–≥—Ä—É–∑–∫–∞ –≤–∑–ª–µ—Ç–∞–µ—Ç
* –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ª–∞–≤–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–ª—è—Ç –ø—Ä–æ–¥

---

# üîß –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ tail latency –≤—ã–∑—ã–≤–∞–µ—Ç

* üìõ **cascade timeouts**
* üìõ **retry storm**
* üìõ **—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (–∫–æ–≥–¥–∞ –ø–æ–ª–æ–≤–∏–Ω–∞ —Ü–µ–ø–æ—á–∫–∏ –æ—Ç–≤–∞–ª–∏–ª–∞—Å—å)
* üìõ **queues backpressure**
* üìõ **–Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π UX**
* üìõ **–Ω–µ—á–µ—Å—Ç–Ω—ã–µ SLA**
* üìõ **hot spot –Ω–∞ –æ–¥–Ω–æ–º –∏–Ω—Å—Ç–∞–Ω—Å–µ**

–õ—é–±–∞—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, —É –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ö–≤–æ—Å—Ç–æ–≤, –æ–±—Ä–µ—á–µ–Ω–∞.

---

# üõ† –ö–∞–∫–∏–µ –µ—Å—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –±–æ—Ä—å–±—ã

## 1. **Hedged Requests** (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤)

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –≤–∏—Å–∏—Ç > X ms ‚Äî —à–ª—ë–º –≤—Ç–æ—Ä–æ–π –Ω–∞ –¥—Ä—É–≥–æ–π –∏–Ω—Å—Ç–∞–Ω—Å.
–ü–æ–±–µ–∂–¥–∞–µ—Ç –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç.

Google –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ —ç—Ç–æ —Ä–µ–∑–∫–æ —Å–Ω–∏–∂–∞–µ—Ç —Ö–≤–æ—Å—Ç—ã.

–û–¥–∏–Ω –∏–∑ —Ç–∞–∫–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ—Ç—Å—Ä–æ—á–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Ç–æ—Ä–∏—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ –±—É–¥–µ—Ç –æ–∂–∏–¥–∞—Ç—å –±–æ–ª–µ–µ 95-–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—è –æ–∂–∏–¥–∞–µ–º–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∑–∞–ø—Ä–æ—Å–æ–≤. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏–º–µ—Ä–Ω–æ –¥–æ 5%, —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∫—Ä–∞—â–∞—è –ø—Ä–∏ —ç—Ç–æ–º —Ö–≤–æ—Å—Ç –∑–∞–¥–µ—Ä–∂–∫–∏. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ —á–∞—Å—Ç–æ –Ω–µ —Å–≤—è–∑–∞–Ω —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º, –∞ –≤—ã–∑–≤–∞–Ω –¥—Ä—É–≥–∏–º–∏ —Ñ–æ—Ä–º–∞–º–∏ –ø–æ–º–µ—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –±–µ–Ω—á–º–∞—Ä–∫–µ Google, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è 1000 –∫–ª—é—á–µ–π, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ BigTable, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–æ 100 —Ä–∞–∑–ª–∏—á–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ö–µ–¥–∂–∏—Ä—É—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ 10 –º—Å —Å–Ω–∏–∂–∞–µ—Ç 99,9- –π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—Å–µ—Ö 1000 –∑–Ω–∞—á–µ–Ω–∏–π —Å 1800 –º—Å –¥–æ 74 –º—Å, –æ—Ç–ø—Ä–∞–≤–ª—è—è –≤—Å–µ–≥–æ –Ω–∞ 2% –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤. –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ö–µ–¥–∂–∏—Ä—É–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∑–∏—Ç—å, –ø–æ–º–µ—Ç–∏–≤ –∏—Ö –∫–∞–∫ –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É, —á–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.


---

## 2. **Load Balancing –ø–æ latency, –∞ –Ω–µ round-robin**

–í—ã–∫–∏–¥—ã–≤–∞–µ—à—å ‚Äú–º–µ–¥–ª–µ–Ω–Ω—ã–µ‚Äù –∏–Ω—Å—Ç–∞–Ω—Å—ã –∏–∑ –ø—É–ª–∞, –ø–æ–∫–∞ –æ–Ω–∏ –Ω–µ –æ—á—É—Ö–∞—é—Ç—Å—è.

---

## 3. **Timeouts + budget propagation**

–ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –µ–º—É –æ—Å—Ç–∞–ª–æ—Å—å –∂–∏—Ç—å, –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å deadline –¥–∞–ª—å—à–µ –ø–æ —Ü–µ–ø–æ—á–∫–µ.

---

## 4. **Local L1 cache**

–ß—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ —Å–µ—Ç–∏.

---

## 5. **Request coalescing**

–î–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–ª—é—á–µ–π ‚Äî —Å—Ç—Ä–æ–∏—Ç –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –±—ç–∫ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å.

---

## 6. **–ò–∑–æ–ª—è—Ü–∏—è –≥–æ—Ä—è—á–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–Ω–æ—Å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π autoscaling pool.

---

## 7. **Shard-per-key**

–ö–æ–≥–¥–∞ –æ–¥–∏–Ω –≥–æ—Ä—è—á–∏–π ID –Ω–µ —Ç–æ—Ä–º–æ–∑–∏—Ç –≤–µ—Å—å shard.

---

# üß™ –î–∏–∞–≥—Ä–∞–º–º–∞ –¥–ª—è hedged requests (–≥–æ—Ç–æ–≤–∞—è –∫ –≤–∏–¥–µ–æ)

```mermaid
sequenceDiagram
    participant Client
    participant S1 as Server #1
    participant S2 as Server #2

    Client->>S1: request (t=0)
    Note over Client,S1: –∂–¥—ë–º 50ms

    alt S1 –º–µ–¥–ª–µ–Ω–Ω—ã–π
        Client->>S2: –¥—É–±–ª–∏—Ä—É—é—â–∏–π request (t=50ms)
        S2-->>Client: –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç (t=80ms)
        S1-->>Client: –ø–æ–∑–¥–Ω–∏–π –æ—Ç–≤–µ—Ç (t=200ms)
    else S1 –±—ã—Å—Ç—Ä—ã–π
        S1-->>Client: –æ—Ç–≤–µ—Ç (t=20ms)
    end
```
___

–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏
* circuit breaker?
* Queue-Based Load Leveling Pattern?
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è–º–∏
  Good enough
* 
–µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ö–≤–æ—Å—Ç–∞ –∞ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è/–∏–∑–±–µ–≥–∞–Ω–∏—è/–æ–±—Ö–æ–¥–∞ —Ö–≤–æ—Å—Ç–∞. –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≥—É–≥–ª–æ–º –¥–µ–ª–∏–ª–∏—Å—å –Ω–∞ –∫—Ä–æ—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ

–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–∞ –º–µ–∂–¥—É –¥–≤—É–º—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ –≤–æ –≤—Ä–µ–º—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–π —Å—Ö–µ–º–æ–π —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞. –ú—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –Ω–µ –≤—ã–±–∏—Ä–∞—Ç—å, –∞ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ–º–µ—â–∞—Ç—å –∫–æ–ø–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –ø–æ–∑–≤–æ–ª—è—Ç—å —Å–µ—Ä–≤–µ—Ä–∞–º –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ —Å—Ç–∞—Ç—É—Å–∞ —ç—Ç–∏—Ö –∫–æ–ø–∏–π. –ó–∞–ø—Ä–æ—Å—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å–µ—Ä–≤–µ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç –∫—Ä–æ—Å—Å-—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞, –º—ã –Ω–∞–∑—ã–≤–∞–µ–º ¬´—Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏¬ª. –í –ø—Ä–æ—Å—Ç–µ–π—à–µ–π —Ñ–æ—Ä–º–µ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –¥–≤—É–º —Ä–∞–∑–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–º–µ—á–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (¬´—Å–≤—è–∑–∞–Ω–Ω—ã–π¬ª). –ö–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è, –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–º–µ–Ω–µ —Å–≤–æ–µ–º—É –æ—Ç–≤–µ—Ç—á–∏–∫—É. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ–Ω –≤—Å—ë –µ—â—ë –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ—Ä–≤–∞–Ω –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –¥–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∏—Ä–æ–≤–∞–Ω.
–°—É—â–µ—Å—Ç–≤—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ, —Ä–∞–≤–Ω–æ–µ –æ–¥–Ω–æ–π —Å—Ä–µ–¥–Ω–µ–π –∑–∞–¥–µ—Ä–∂–∫–µ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–≥—É—Ç –Ω–∞—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å, –ø–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç–º–µ–Ω–µ —É–∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥—Ä—É–≥–æ–º—É —Å–µ—Ä–≤–µ—Ä—É. –¢–∞–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –æ—á–µ—Ä–µ–¥–∏ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—É—Å—Ç—ã. –ü–æ—ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—É –ø–æ–ª–µ–∑–Ω–æ –≤–≤–µ—Å—Ç–∏ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É, –≤ –¥–≤–∞ —Ä–∞–∑–∞ –ø—Ä–µ–≤—ã—à–∞—é—â—É—é —Å—Ä–µ–¥–Ω—é—é –∑–∞–¥–µ—Ä–∂–∫—É —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (1 –º—Å –∏–ª–∏ –º–µ–Ω—å—à–µ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö —Ü–µ–Ω—Ç—Ä–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö), –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤.

–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–∑–æ–≤—ã—Ö –º–∞—à–∏–Ω –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞ –∏ –Ω–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞ —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º (—Ç–∞–∫–∏–º –∫–∞–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–µ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–º–µ—Ö–∏ –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ä–∞–±–æ—á–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏)

–º–∏–∫—Ä–æ—Ä–∞–∑–¥–µ–ª—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –æ–ø–∏—Å–∞–Ω–Ω–æ–π –≤ Stoica 12 , –∏ –º–µ—Ç–æ–¥—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è, –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É –≤ DeWitt et al. 6


---

# üìö –°—Å—ã–ª–∫–∏ –Ω–∞ —Ö–æ—Ä–æ—à–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### üî• –ì–ª–∞–≤–Ω–∞—è —Å—Ç–∞—Ç—å—è:

**The Tail at Scale** (Google Research)
[https://research.google/pubs/the-tail-at-scale/](https://research.google/pubs/the-tail-at-scale/)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

* Jeff Dean, ‚ÄúAchieving Rapid Response Times in Large Online Services‚Äù
* ACM Queue: ‚ÄúLatency Numbers Every Programmer Should Know‚Äù
* HighScalability: –æ–±–∑–æ—Ä—ã –ø–æ tail latency
* AWS Builder‚Äôs Library: ‚ÄúTimeouts, retries, and backoff with jitter‚Äù
* Papers on hedged requests (Google)
* LinkedIn‚Äôs work on queue latency & tail control

---

# üéØ –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è

Tail latency ‚Äî —ç—Ç–æ:

* –Ω–µ —Å—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞
* –Ω–µ p50
* —ç—Ç–æ —Ö—É–¥—à–∏–µ 1% –∑–∞–ø—Ä–æ—Å–æ–≤
* –æ–Ω–∏ –ª–æ–º–∞—é—Ç –≤—Å—ë, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å—é
* –∏ —Ä–∞—Å—Ç—É—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏ –∫–∞—Å–∫–∞–¥–µ —Å–µ—Ä–≤–∏—Å–æ–≤

> –ö–∞—Ä–∞—Ç–∏—à—å —Ö–≤–æ—Å—Ç ‚Äî —Å–ø–∞—Å–∞–µ—à—å –ø—Ä–æ–¥.
> –£–ª—É—á—à–∞–µ—à—å —Å—Ä–µ–¥–Ω–µ–µ ‚Äî —É–ª—É—á—à–∞–µ—à—å —Ç–æ–ª—å–∫–æ –≥—Ä–∞—Ñ–∏–∫–∏.


# üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ tail latency –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º —è–∑—ã–∫–µ

Tail latency ‚Äî —ç—Ç–æ **—Ä–µ–¥–∫–∏–µ, –Ω–æ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**.
–¢–∏–ø–∞: 1 –∏–∑ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ—á–µ–º—É-—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è 2 —Å–µ–∫—É–Ω–¥—ã –≤–º–µ—Å—Ç–æ 20 –º—Å.

–¢—ã –º–æ–∂–µ—à—å –¥—É–º–∞—Ç—å: ‚Äú–Ω—É –∏ –ø–æ—Ñ–∏–≥ –Ω–∞ —ç—Ç–∏ 0.1%‚Ä¶‚Äù.
–ê –≤–æ—Ç –Ω–∏—Ñ–∏–≥–∞.

–≠—Ç–∏ *—Ä–µ–¥–∫–∏–µ* –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

* –∑–∞–Ω–∏–º–∞—é—Ç –≤–æ—Ä–∫–µ—Ä
* –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –≤ –æ—á–µ—Ä–µ–¥–∏
* –∑–∞–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
* –≤—ã–∑—ã–≤–∞—é—Ç —Ä–µ—Ç—Ä–∞–∏
* –≤—ã–∑—ã–≤–∞—é—Ç —Ç–∞–π–º–∞—É—Ç—ã
* —Å–æ–∑–¥–∞—é—Ç –ª–∞–≤–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –≤–∞–ª–∏—Ç –≤—Å—ë

–¢–æ –µ—Å—Ç—å **–æ–¥–∏–Ω —Ç–æ—Ä–º–æ–∑—è—â–∏–π –∑–∞–ø—Ä–æ—Å ‚Üí —Ç—è–Ω–µ—Ç –∑–∞ —Å–æ–±–æ–π –ª–∞–≤–∏–Ω—É –¥—Ä—É–≥–∏—Ö**.

---

# üß® –ü–æ—á–µ–º—É –æ–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ª–æ–º–∞–µ—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É?

–¢–µ–ø–µ—Ä—å –ø–æ –ø—É–Ω–∫—Ç–∞–º, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ.

---

# 1) ‚úî –î–∞ ‚Äî –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å

–ü—Ä–µ–¥—Å—Ç–∞–≤—å:

* —É —Å–µ—Ä–≤–∏—Å–∞ 20 –≤–æ—Ä–∫–µ—Ä–æ–≤
* 1 –≤–æ—Ä–∫–µ—Ä –∑–∞–≤–∏—Å –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É
* –æ—Å—Ç–∞–ª—å–Ω—ã–µ 19 —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

* –≤ –æ—á–µ—Ä–µ–¥—å –ª–æ–∂–∏—Ç—Å—è –Ω–∞ 1 –∑–∞–ø—Ä–æ—Å –±–æ–ª—å—à–µ
* —ç—Ç–æ—Ç –ª–∏—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å –∑–∞–º–µ–¥–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ
* –∏ —ç—Ç–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ **—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –≤–æ–ª–Ω–∞**

–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **queueing delay**.

–ì—Ä–∞—Ñ–∏–∫ (–æ—á–µ–Ω—å –Ω–∞–≥–ª—è–¥–Ω–æ):

–ï—Å–ª–∏ –≤—Ö–æ–¥—è—â–∏–π RPS –ø–æ—á—Ç–∏ —Ä–∞–≤–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É ‚Üí **–ª—é–±–∞—è** –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å ‚Üí —Ö–≤–æ—Å—Ç —Ä–∞—Å—Ç—ë—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.

---

# 2) ‚úî –û–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –ø–æ—Ä—Ç–∏—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É

–£ —Ç–µ–±—è 10 —Å–µ—Ä–≤–µ—Ä–æ–≤, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –∫–∏–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã round-robin:

* 9 —Å–µ—Ä–≤–µ—Ä–æ–≤ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ 20 ms
* –æ–¥–∏–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ 800 ms

–ö–∞–∂–¥—ã–π 10-–π –∑–∞–ø—Ä–æ—Å –∏–¥—ë—Ç –Ω–∞ —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–µ—Ä–≤–µ—Ä ‚Üí
**–∫–∞–∂–¥—ã–π 10-–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ª–∞–≥ –≤ 40 —Ä–∞–∑ –¥–æ–ª—å—à–µ**.

–ê –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å A –≤—ã–∑—ã–≤–∞–µ—Ç B 5 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥?
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —Ç–æ—Ä–º–æ–∑–Ω–æ–π —É–∑–µ–ª —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.

---

# 3) ‚úî Tail latency –≤ —Ü–µ–ø–æ—á–∫–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –º–Ω–æ–∂–∏—Ç—Å—è

–û–¥–∏–Ω —Å–µ—Ä–≤–∏—Å ‚Äî —Ñ–∏–≥–Ω—è.
–ù–æ –µ—Å–ª–∏ —É —Ç–µ–±—è —Ü–µ–ø–æ—á–∫–∞:

```
Frontend ‚Üí API Gateway ‚Üí Auth ‚Üí Profile ‚Üí Cart ‚Üí Payment
```

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ—é –¥–æ–ª—é ‚Äú—Ö–≤–æ—Å—Ç–∞‚Äù.

–ï—Å–ª–∏ —É –∫–∞–∂–¥–æ–≥–æ p99 = 200 ms,
—Ç–æ —Ü–µ–ø–æ—á–∫–∞ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å **—Å–µ–∫—É–Ω–¥—ã** –Ω–∞ p99.

–≠—Ç–æ –∏ –µ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç ‚Äútail at scale‚Äù.

---

# 4) ‚úî –ò–∑-–∑–∞ —Ö–≤–æ—Å—Ç–æ–≤ –Ω–∞—á–∏–Ω–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã

–ó–∞–ø—Ä–æ—Å –ø–æ–≤–∏—Å ‚Üí –∫–ª–∏–µ–Ω—Ç –∂–¥—ë—Ç ‚Üí –≤—Ä–µ–º—è –≤—ã—à–ª–æ ‚Üí —Ç–∞–π–º–∞—É—Ç ‚Üí
–∫–ª–∏–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç retry ‚Üí —Ä–µ—Ç—Ä–∞–∏ —Å–æ–∑–¥–∞—é—Ç –¥–æ–ø. –Ω–∞–≥—Ä—É–∑–∫—É ‚Üí –Ω–∞—á–∏–Ω–∞—é—Ç –ø–∞–¥–∞—Ç—å –¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã.

–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **retry storm**.

–•—É–∂–µ –≤—Å–µ–≥–æ: –µ—Å–ª–∏ —É —Ç–µ–±—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Ç—Ä–∞–∏ –≤ SDK –∏–ª–∏ –≤ gateway.

–†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

1. –û–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å –º–µ–¥–ª–µ–Ω–Ω—ã–π
2. p99 ‚Üë
3. timeout ‚Üë
4. retry * N
5. –Ω–∞–≥—Ä—É–∑–∫–∞ ‚Üë
6. –±–∞–∑–∞ ‚Üë
7. –≤—Å—ë –ª–æ–∂–∏—Ç—Å—è

---

# 5) ‚úî –¢–æ—Ä–º–æ–∑–∞ –≤—ã–∑—ã–≤–∞—é—Ç backpressure

–ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ, Kafka) –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å—Ç–∏:

* –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç
* –∑–∞–¥–µ—Ä–∂–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
* —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ–∑–∂–µ
* –¥–µ–¥–ª–∞–π–Ω—ã –Ω–∞—Ä—É—à–∞—é—Ç—Å—è
* –±–æ–ª—å—à–µ —Ä–µ—Ç—Ä–∞–µ–≤
* –±–æ–ª—å—à–µ –∑–∞–¥–µ—Ä–∂–∫–∏
* –µ—â—ë –º–µ–¥–ª–µ–Ω–Ω–µ–µ

–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Å–Ω–µ–∂–Ω—ã–π –∫–æ–º latency**.

---

# 6) ‚úî Tail latency –ª–æ–º–∞–µ—Ç –∫—ç—à

–û–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí –æ–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π refresh –∫–ª—é—á–∞ ‚Üí
–¥–µ—Å—è—Ç–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ–ª—É—á–∞—é—Ç cache miss ‚Üí
–≤—Å–µ –∏–¥—É—Ç –≤ –±–∞–∑—É ‚Üí
–±–∞–∑–∞ –ø–∞–¥–∞–µ—Ç.

–ï—Å–ª–∏ —É —Ç–µ–±—è hot-key ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è —É–≥—Ä–æ–∑–∞.

---

# üß© –ò—Ç–æ–≥–æ: —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å

Tail latency –æ–ø–∞—Å–Ω–∞ –Ω–µ –ø–æ—Ç–æ–º—É —á—Ç–æ ‚Äú–æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –º–µ–¥–ª–µ–Ω–Ω—ã–π‚Äù.

Tail latency –æ–ø–∞—Å–Ω–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ:

* —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ **—É—Å–∏–ª–∏–≤–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
* –æ—á–µ—Ä–µ–¥–∏ **—Ä–∞–∑–º–Ω–æ–∂–∞—é—Ç –∑–∞–¥–µ—Ä–∂–∫–∏**
* —Ä–µ—Ç—Ä–∞–∏ **—É–º–Ω–æ–∂–∞—é—Ç –Ω–∞–≥—Ä—É–∑–∫—É**
* –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏ **—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞–∑–¥–∞—é—Ç —ç—Ç—É –±–æ–ª—å**
* —Ü–µ–ø–æ—á–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ **–Ω–∞–∫—Ä—É—á–∏–≤–∞—é—Ç —Ö–≤–æ—Å—Ç—ã**
* –∫—ç—à–∏ –∏ –±–∞–∑—ã **–Ω–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ª–∞–≤–∏–Ω—É miss + retry**
* –∫–æ–Ω–µ—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç ‚Äú—É –Ω–∞—Å –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å‚Äù

> Tail latency ‚Äî —ç—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –¥–æ–º–∏–Ω–æ:
> –æ–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ç–∞–ª–∫–∏–≤–∞–µ—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É –≤ –∑–æ–Ω—É —Ö–∞–æ—Å–∞.
