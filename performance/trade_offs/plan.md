# üî• C. Resource Optimization Trade-offs

## (–∫–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏ –ª–æ–º–∞–µ—Ç —Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö)

## 1. –ë–æ–ª—å (–∫–æ–Ω—Ç–µ–∫—Å—Ç)

–í—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç–µ –æ–¥–Ω—É –º–µ—Ç—Ä–∏–∫—É ‚Äî –∏ –ª–æ–º–∞–µ—Ç–µ —Ç—Ä–∏ –¥—Ä—É–≥–∏–µ:

* —É–º–µ–Ω—å—à–∏–ª–∏ latency ‚Üí —Ä–∞—Å—Ö–æ–¥—ã –≤—ã—Ä–æ—Å–ª–∏ √ó2
* —É–≤–µ–ª–∏—á–∏–ª–∏ throughput ‚Üí consistency —É–ª–µ—Ç–µ–ª–∞ –≤ eventual
* —É–∂–∞–ª–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å ‚Üí SLA —É–ø–∞–ª –¥–æ ¬± ‚Äú–∫–∞–∫ –ø–æ–≤–µ–∑—ë—Ç‚Äù
* –≤–∫–ª—é—á–∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —É–º–µ—Ä–ª–∞
* –≤–∫–ª—é—á–∏–ª–∏ retries ‚Üí —É–±–∏–ª–∏ backend retry-st–æ—Ä–º–æ–º
* –ø–∞—Ä–∞–ª–ª–µ–ª–∏–ª–∏ –∑–∞–ø—Ä–æ—Å—ã ‚Üí –ø–æ–ª—É—á–∏–ª–∏ lock contention –∏ —Å—Ç–∞–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

–í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö **–∫–∞–∂–¥–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –ø–ª–∞—Ç–∞ —á–µ–º-—Ç–æ –¥—Ä—É–≥–∏–º**.

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–∞ (—Å —Ä–∞–∑–±–∏–≤–∫–æ–π –Ω–∞ —Ç–∏–ø—ã trade-off‚Äô–æ–≤)

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1. Latency vs Consistency

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:

–ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É, –º—ã –≤—Å–µ–≥–¥–∞ –∏–¥—ë–º –Ω–∞ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –ø–æ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

#### –û–±—Å—É–¥–∏—Ç—å:

* –ö—ç—à —É—Å–∫–æ—Ä—è–µ—Ç —á—Ç–µ–Ω–∏—è, –Ω–æ –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç stale window.
* Eventual consistency –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏.
* Read replicas (—Ä–µ–ø–ª–∏–∫–∏) —É—Å–∫–æ—Ä—è—é—Ç —á—Ç–µ–Ω–∏–µ ‚Üí –¥–∞—é—Ç —Å–ª–æ–º–∞–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–µ.

#### –ü—Ä–∏–º–µ—Ä –±–æ–ª–∏:

–û—Ç–¥–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–æ—Ä–∑–∏–Ω—É –∏–∑ Redis, –≤ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–±—ã–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å item ‚Üí –∑–∞–∫–∞–∑ –ø—Ä–∏—à—ë–ª —Å –Ω–µ–≤–µ—Ä–Ω–æ–π —Ü–µ–Ω–æ–π.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 2. Throughput vs Accuracy

–ß—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å throughput, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è **–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å—é**.

#### –í–∞—Ä–∏–∞–Ω—Ç—ã:

* HyperLogLog: —Å–∫–æ—Ä–æ—Å—Ç—å —Å—á—ë—Ç—á–∏–∫–∞ –≤ –æ–±–º–µ–Ω –Ω–∞ ‚Äú–ø–ª—é—Å-–º–∏–Ω—É—Å 1.5% —Ç–æ—á–Ω–æ—Å—Ç—å‚Äù
* Bloom Filter: –±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `exists` –±–µ–∑ —Ç–æ—á–Ω–æ—Å—Ç–∏ 100%
* Sampling: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ 1% –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–º–µ—Å—Ç–æ 100% —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É, –Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç –ø–æ–ª–Ω–æ—Ç—É –¥–∞–Ω–Ω—ã—Ö

#### –ü—Ä–∏–º–µ—Ä –±–æ–ª–∏:

–ü—ã—Ç–∞–µ—à—å—Å—è —Å–¥–µ–ª–∞—Ç—å ‚Äú—Ç–æ—á–Ω—ã–π real-time —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤‚Äù ‚Üí –ª–æ–º–∞–µ—à—å –±–∞–∑—É.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 3. Latency vs Cost

–•–æ—á–µ—à—å –¥–µ—à–µ–≤–æ ‚Üí –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ.
–•–æ—á–µ—à—å –±—ã—Å—Ç—Ä–æ ‚Üí –±—É–¥–µ—Ç –¥–æ—Ä–æ–≥–æ.

#### –¢–∏–ø–∏—á–Ω—ã–µ trade-off‚Äô—ã:

* –±–æ–ª—å—à–µ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ ‚Üí –º–µ–Ω—å—à–µ latency ‚Üí –±–æ–ª—å—à–µ —Å—á–µ—Ç–∞ –≤ AWS
* CDN –¥–∞—ë—Ç —Å—É–ø–µ—Ä—Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–æ stale window (5‚Äì60 –º–∏–Ω)
* provisioned capacity vs on-demand

#### –ü—Ä–∏–º–µ—Ä –±–æ–ª–∏:

‚Äú–î–∞–≤–∞–π—Ç–µ –¥–µ—Ä–∂–∞—Ç—å warm-–ø—É–ª—ã Lambdas‚Äù ‚Üí —Å—á—ë—Ç –≤—ã—Ä–∞—Å—Ç–∞–µ—Ç –≤ 10 —Ä–∞–∑.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 4. Availability vs Consistency (CAP)

–¢—ã –ª–∏–±–æ:

* –¥–µ—Ä–∂–∏—à—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (CP),
* –ª–∏–±–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (AP),
* –ª–∏–±–æ —É–º–∏—Ä–∞–µ—à—å.

#### –ü—Ä–∏–º–µ—Ä:

Cassandra –≤—ã–±–∏—Ä–∞–µ—Ç AP ‚Üí —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç.
Postgres –≤—ã–±–∏—Ä–∞–µ—Ç CP ‚Üí –ø–∞–¥–∞–µ—Ç –ø–æ–¥ —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–¥–∞—ë—Ç –º—É—Å–æ—Ä.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 5. Caching vs Correctness

–ö—ç—à —É–ª—É—á—à–∞–µ—Ç latency –∏ throughput, –Ω–æ:

* stale data
* incoherent replicas
* invalidation hell
* race conditions –ø—Ä–∏ –∑–∞–ø–∏—Å–∏

#### –ü—Ä–∏–º–µ—Ä:

–¢—Ä–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞ API —á–∏—Ç–∞—é—Ç –∫—ç—à, –∞ –æ–¥–∏–Ω –ø–∏—à–µ—Ç ‚Üí inconsistent view.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 6. Parallelism vs Contention

–ë–æ–ª—å—à–µ –≤–æ—Ä–∫–µ—Ä–æ–≤ = –±–æ–ª—å—à–µ throughput‚Ä¶ –¥–æ –ø–æ—Ä—ã.

–ü–æ—Ç–æ–º:

* lock contention
* mutex –∑–∞–º–µ–¥–ª—è–µ—Ç –≤—Å–µ –ø–æ—Ç–æ–∫–∏
* shared —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ bottleneck

–≠—Ç–æ —Ä–∞–∑—Ä—É—à–∞–µ—Ç throughput —Å–∏–ª—å–Ω–µ–µ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –º–µ—Ç—Ä–∏–∫–∏.

#### –ü—Ä–∏–º–µ—Ä –±–æ–ª–∏:

–ü–æ–¥–Ω—è–ª–∏ workers –≤ PHP-FPM —Å 20 –¥–æ 80 ‚Üí latency —Å—Ç–∞–ª–∞ —Ö—É–∂–µ.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 7. Memory vs Throughput

–ü–æ–¥–Ω–∏–º–∞–µ—à—å throughput ‚Üí —Ä–∞—Å—Ç—ë—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ RAM.
–°—Ç–∞–≤–∏—à—å –∫—ç—à ‚Üí —Ä–∞—Å—Ç—ë—Ç RSS.
–ò—Å–ø–æ–ª—å–∑—É–µ—à—å async batching ‚Üí –ø–∏–∫ –ø–∞–º—è—Ç–∏ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è.

#### –ü—Ä–∏–º–µ—Ä:

Redis –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç √ó4 –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ –∏–∑-–∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 8. Durability vs Speed

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –±—ã—Å—Ç—Ä—É—é –∑–∞–ø–∏—Å—å:

* –æ—Ç–∫–ª—é—á–∞–π fsync
* –∏—Å–ø–æ–ª—å–∑—É–π buffered writes
* —É–º–µ–Ω—å—à–∏ durability window

–ù–æ —ç—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.

#### –ü—Ä–∏–º–µ—Ä—ã:

* Postgres `synchronous_commit=off` ‚Üí –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä—å
* Redis AOF ‚Äúeverysec‚Äù vs ‚Äúalways‚Äù vs ‚Äúno‚Äù

---

# üî∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 9. Reliability vs Performance

–•–æ—Ç–∏–º, —á—Ç–æ–±—ã —Ä–µ–ø–ª–∏–∫–∏ –±—ã–ª–∏ –≤–µ–∑–¥–µ ‚Üí –¥–æ—Ä–æ–≥–æ.
–•–æ—Ç–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ ‚Üí –º–µ–Ω—å—à–µ —Ä–µ–ø–ª–∏–∫ ‚Üí –Ω–∏–∂–µ fault tolerance.

#### –ü—Ä–∏–º–µ—Ä:

–¢—Ä–∏ Availability Zone –ø—Ä–æ—Ç–∏–≤ –æ–¥–Ω–æ–π.

---

# 3. –ü—Ä–∏–º–µ—Ä—ã –±–æ–ª–∏ (–∂–∏–≤—ã–µ, –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ)

–¢—ã —É–∂–µ —á–∞—Å—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏–ª, —è —Ä–∞—Å—à–∏—Ä—é:

* aggressive retries –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ retry-storm ‚Üí –ø–∞–¥–∞–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä
* L1 –∫—ç—à —É—Å–∫–æ—Ä—è–µ—Ç API ‚Üí –Ω–æ stale window –ª–æ–º–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
* —É–º–µ–Ω—å—à–∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ ‚Üí –≤—ã—Ä–æ—Å–ª–∞ –æ—á–µ—Ä–µ–¥—å ‚Üí latency √ó20
* —É–≤–µ–ª–∏—á–∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ ‚Üí lock contention ‚Üí throughput –ø–∞–¥–∞–µ—Ç
* —É–º–µ–Ω—å—à–∏–ª–∏ —Ä–µ–ø–ª–∏–∫–∞-—Ñ–∞–∫—Ç–æ—Ä –≤ Kafka ‚Üí –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞ ‚Üí –Ω–æ —É–ø–∞–ª–∞ fault tolerance
* –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ –≤—Å—ë –≤ Redis –∏–∑ Postgres ‚Üí –±—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–∏—Å —Å—Ç–∞–ª –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º

---

# 4. –ß–µ–≥–æ –µ—â—ë –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç?

## üî• –î–æ–±–∞–≤–∏—Ç—å ‚Äú—Ä–µ—Å—É—Ä—Å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Ç—Ä—ë—Ö –º–µ—Ç—Ä–∏–∫‚Äù

SRE –ª—é–±—è—Ç –≥—Ä–∞—Ñ–∏–∫:

```
     –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
         /      \
   –°—Ç–æ–∏–º–æ—Å—Ç—å ‚Äî –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
```

–≠—Ç–æ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ Mermaid:

```mermaid
graph TD
A(–ë—ã—Å—Ç—Ä–æ) --> B(–î–æ—Ä–æ–≥–æ)
A --> C(–ú–µ–Ω–µ–µ –Ω–∞–¥—ë–∂–Ω–æ)
```

## üî• –î–æ–±–∞–≤–∏—Ç—å ‚ÄúThe Iron Law of Latency Costs‚Äù

> –õ—é–±–∞—è –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è latency —Å—Ç–æ–∏—Ç –¥–µ–Ω–µ–≥.

## üî• –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### **–õ—É—á—à–µ–µ, —á—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å:**

1. **The Tail at Scale ‚Äî Google Research**
2. **Jeff Dean ‚Äî Achieving Rapid Response Times in Large-Scale Systems**
3. **Designing Data-Intensive Applications ‚Äî Kleppmann (–≥–ª–∞–≤–∞ –ø—Ä–æ trade-offs)**
4. **AWS Builder‚Äôs Library: Timeouts, backpressure, retries**
5. **‚ÄúFallacies of Distributed Computing‚Äù ‚Äî –∫–ª–∞—Å—Å–∏–∫–∞**
6. **Mechanical Sympathy ‚Äî Martin Thompson**
