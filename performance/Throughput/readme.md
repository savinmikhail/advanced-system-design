# üî• B. Throughput Scaling

# üé¨ –í–°–¢–£–ü–õ–ï–ù–ò–ï (2‚Äì3 –º–∏–Ω—É—Ç—ã)

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤–∞—à —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ. –ö—Ä–∞—Å–∏–≤–æ, —Ä–æ–≤–Ω–æ, –≥—Ä–∞—Ñ–∏–∫–∏ –∑–µ–ª—ë–Ω—ã–µ.
–í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Äî –∏ –≤—Å—ë –≤–Ω–µ–∑–∞–ø–Ω–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∞–¥.

* latency –ø—Ä—ã–≥–Ω—É–ª–æ –≤ 20 —Ä–∞–∑,
* RPS —É–ø–∞–ª,
* –æ—á–µ—Ä–µ–¥–∏ –≤—ã—Ä–æ—Å–ª–∏,
* –∫–ª–∏–µ–Ω—Ç—ã –Ω–∞—á–∞–ª–∏ —Ä–µ—Ç—Ä–∞–∏—Ç—å,
* downstream —É–º–µ—Ä,
* —É–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–ø—É—Å—Ç–∏–ª–æ—Å—å –≤ –º–∏–Ω—É—Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å.

–≠—Ç–æ –Ω–µ –±–∞–≥, —ç—Ç–æ **–∑–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**.

–°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä—ë–º:

* —á—Ç–æ —Ç–∞–∫–æ–µ throughput,
* –ø–æ—á–µ–º—É –æ–Ω –ù–ï —Ä–∞—Å—Ç—ë—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤,
* –ø–æ—á–µ–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–Ω–æ–≥–¥–∞ *—É–±–∏–≤–∞–µ—Ç* –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å,
* –∏ –∫–∞–∫–∏–µ –∑–∞–∫–æ–Ω—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

---

# üìå –ß–¢–û –¢–ê–ö–û–ï THROUGHPUT (–∏ —á–µ–º –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç latency)

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –≤ –≥–æ–ª–æ–≤–µ –ø—É—Ç–∞—é—Ç —ç—Ç–∏ –¥–≤–µ –≤–µ—â–∏, –∞ –ø–æ—Ç–æ–º —É–¥–∏–≤–ª—è—é—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫–∞–º.

### Latency

–≠—Ç–æ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ **–û–î–ò–ù** –∑–∞–ø—Ä–æ—Å.
–ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã.

### Throughput

–≠—Ç–æ **–°–ö–û–õ–¨–ö–û** –∑–∞–ø—Ä–æ—Å–æ–≤ –º—ã –º–æ–∂–µ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å **–≤ —Å–µ–∫—É–Ω–¥—É**.
RPS, QPS, ops/sec.

–û–Ω–∏ –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω–æ —Å–≤—è–∑–∞–Ω—ã:

```text
–ï—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ > throughput ‚Üí latency —Ä–∞—Å—Ç—ë—Ç.  
–ï—Å–ª–∏ latency —Ä–∞—Å—Ç—ë—Ç ‚Üí throughput –ø–∞–¥–∞–µ—Ç.  
–ï—Å–ª–∏ —Ä–∞—Å—Ç—ë—Ç concurrency ‚Üí —Ä–∞—Å—Ç—ë—Ç latency.
```

–≠—Ç–æ –Ω–µ –¥–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏.
–≠—Ç–æ –¥–≤–∞ –∫–æ–Ω—Ü–∞ –æ–¥–Ω–æ–π —Ç—Ä—É–±—ã, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–±–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–µ.

---

# üìê –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏

```mermaid
graph TD
A[–í—Ö–æ–¥—è—â–∏–π –ø–æ—Ç–æ–∫ –≤—ã—Ä–æ—Å] --> B[–û—á–µ—Ä–µ–¥—å —Ä–∞—Å—Ç—ë—Ç]
B --> C[Latency —Ä–∞—Å—Ç—ë—Ç]
C --> D[Throughput –ø–∞–¥–∞–µ—Ç]
D --> E[–û—á–µ—Ä–µ–¥—å —Ä–∞—Å—Ç—ë—Ç –µ—â—ë –±—ã—Å—Ç—Ä–µ–µ]
E --> C
```

–≠—Ç–æ –∏ –µ—Å—Ç—å **doom loop**.
–õ—é–±–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É ‚Äî —É–º–µ–µ—Ç –ø–∞–¥–∞—Ç—å —Å–∞–º–∞ –Ω–∞ —Å–µ–±—è.

---

# üìä –ì–õ–ê–í–ù–ê–Ø –§–û–†–ú–£–õ–ê (Little‚Äôs Law)

```
Latency = Concurrency / Throughput
```

–ü—Ä–∏–º–µ—Ä:

* concurrency = 3000
* throughput = 1000 RPS

latency = 3 —Å–µ–∫—É–Ω–¥—ã.

–ë–µ–∑ –º–∞–≥–∏–∏.
–ü—Ä–æ—Å—Ç–æ –∑–∞–∫–æ–Ω—ã –æ—á–µ—Ä–µ–¥–µ–π.

---

# üî• –ü–†–ò–ú–ï–† –ò–ó –†–ï–ê–õ–¨–ù–û–ì–û –ú–ò–†–ê

Redis –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ 1‚Äì2 ms. –ò–¥–µ–∞–ª—å–Ω–æ.

–ù–æ:

* –Ω–∞ hot key –æ–Ω –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ 50‚Äì100k RPS,
* –≤—ã –¥–∞—ë—Ç–µ 200k –≤—Ö–æ–¥—è—â–µ–≥–æ,
* throughput –∫–æ–Ω—á–∞–µ—Ç—Å—è,
* latency —Ä–∞—Å—Ç—ë—Ç –¥–æ 10ms,
* –ø–æ—Ç–æ–º 50ms,
* –ø–æ—Ç–æ–º 200ms,
* –ø–æ—Ç–æ–º Redis —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫–æ–Ω–Ω–µ–∫—Ç—ã.

–î–∞–∂–µ –∂–µ–ª–µ–∑–Ω—ã–π Redis –∏–º–µ–µ—Ç –∂—ë—Å—Ç–∫–∏–π –ø–æ—Ç–æ–ª–æ–∫.

---

# üß© –ê–ù–ê–õ–û–ì–ò–Ø

**Latency** ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –∫–∞—Å—Å–∏—Ä–∞ –æ–±—Å–ª—É–∂–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è.
**Throughput** ‚Äî —Å–∫–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –ø—Ä–æ–π–¥—ë—Ç —á–µ—Ä–µ–∑ –∫–∞—Å—Å—É –∑–∞ –º–∏–Ω—É—Ç—É.

–ï—Å–ª–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–µ, —á–µ–º –∫–∞—Å—Å–∞ —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Å–ª—É–∂–∏—Ç—å:

* –æ—á–µ—Ä–µ–¥—å —Ä–∞—Å—Ç—ë—Ç,
* throughput –Ω–µ —Ä–∞—Å—Ç—ë—Ç ‚Äî —É–ø—ë—Ä–ª–∞—Å—å,
* –ª—é–¥–∏ –±–µ—Å—è—Ç—Å—è.

–° backend-—Å–∏—Å—Ç–µ–º–∞–º–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ.

---

# 1. –ë–û–õ–¨: –ü–û–ß–ï–ú–£ ‚Äú–î–û–ë–ê–í–ò–ú –°–ï–†–í–ï–†–û–í‚Äù –ù–ï –†–ê–ë–û–¢–ê–ï–¢

* –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ **–Ω–µ–ª–∏–Ω–µ–π–Ω–æ**
* –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏ –Ω–∞—Å—ã—â–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å **–ø–∞–¥–∞–µ—Ç**
* –æ—á–µ—Ä–µ–¥–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è **–≤–µ–∑–¥–µ**
* –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è **—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–æ–π –±—É—Ç—ã–ª–æ—á–Ω–æ–≥–æ –≥–æ—Ä–ª—ã—à–∫–∞**
* –¥–∞–∂–µ –û–î–ò–ù –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ª–æ–º–∞–µ—Ç –≤—Å—é —Ü–µ–ø–æ—á–∫—É

---

# 2. –ó–ê–ö–û–ù–´ –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø

## ‚úî 2.1. –ó–∞–∫–æ–Ω –ê–º–¥–∞–ª—è (Amdahl‚Äôs Law)

–ì–æ–≤–æ—Ä–∏—Ç –ø—Ä–æ—Å—Ç–æ–µ:

> –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –º–∞–ª–µ–Ω—å–∫–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –ù–ï –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—Å—è ‚Äî –æ–Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä:

* 95% –º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å,
* 5% ‚Äî –Ω–µ—Ç,

‚Üí –º–∞–∫—Å–∏–º—É–º —É—Å–∫–æ—Ä–µ–Ω–∏—è = x20.
–•–æ—Ç—å 1000 —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å—Ç–∞–≤—å.

---

## ‚úî 2.2. –ó–∞–∫–æ–Ω –ì—É—Å—Ç–∞—Ñ—Å–æ–Ω–∞ (Gustafson‚Äôs Law)

–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å –ê–º–¥–∞–ª—é:

> –µ—Å–ª–∏ —Å–∞–º–∞ –∑–∞–¥–∞—á–∞ —Ä–∞—Å—Ç—ë—Ç ‚Üí –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ.

–•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, ML, batch-–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞.
–ü–ª–æ—Ö–æ ‚Äî –¥–ª—è –≤–µ–±–∞ –∏ API.

---

## ‚úî 2.3. Universal Scalability Law (Gunther)

–≠—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä—É—é –ª—é–±—è—Ç SRE.

–û–Ω–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É:

* –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ worker‚Äô–æ–≤ throughput —Ä–∞—Å—Ç—ë—Ç,
* –ø–æ—Ç–æ–º –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–∏–∫–∞,
* –∞ –ø–æ—Ç–æ–º –Ω–∞—á–∏–Ω–∞–µ—Ç –ü–ê–î–ê–¢–¨.

–ü–æ—á–µ–º—É?
–ü–æ—Ç–æ–º—É —á—Ç–æ:

* **–∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è** (–∑–∞ shared —Ä–µ—Å—É—Ä—Å—ã),
* **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è** (overhead –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é).

```mermaid
graph LR
A(–ù–µ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–æ–≤) --> B(Throughput —Ä–∞—Å—Ç—ë—Ç)
B --> C(–¢–æ—á–∫–∞ –Ω–∞—Å—ã—â–µ–Ω–∏—è)
C --> D(–ß–µ—Ä–µ–∑–º–µ—Ä–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è)
D --> E(Throughput –ø–∞–¥–∞–µ—Ç)
```

---

## ‚úî 2.4. Little‚Äôs Law (–µ—â—ë —Ä–∞–∑)

–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–∫–æ–Ω –æ—á–µ—Ä–µ–¥–µ–π:

```
Latency = Concurrency / Throughput
```

–†–∞–±–æ—Ç–∞–µ—Ç –í–°–ï–ì–î–ê.

---

# 3. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –≠–§–§–ï–ö–¢–´, –ö–û–¢–û–†–´–ï –£–ë–ò–í–ê–Æ–¢ –ü–†–û–î

## ‚úî Convoy Effect

–û–¥–∏–Ω —Ç–æ—Ä–º–æ–∑—è—â–∏–π –∑–∞–ø—Ä–æ—Å –¥–µ—Ä–∂–∏—Ç lock ‚Üí –≤—Å–µ –∂–¥—É—Ç.

## ‚úî Head-of-Line Blocking

–ü–µ—Ä–≤—ã–π –≤ –æ—á–µ—Ä–µ–¥–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–π ‚Üí –≤—Å—è –æ—á–µ—Ä–µ–¥—å —É–º–µ—Ä–ª–∞.

## ‚úî Tail Amplification

–ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ö–≤–æ—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —Å—Ä–µ–¥–Ω–µ–π.

## ‚úî Coordinated Omission

–ú–µ—Ç—Ä–∏–∫–∏ –ª–≥—É—Ç.
–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –≥—Ä–∞—Ñ–∏–∫–∏ –≥–ª–∞–¥–∫–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ –º–æ–≥–ª–∏ –ø–æ–ø–∞—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö).

---

# 4. –†–ï–ê–õ–¨–ù–ê–Ø –ë–û–õ–¨ –£ –ò–ù–ñ–ï–ù–ï–†–û–í

* RabbitMQ –æ—á–µ—Ä–µ–¥—å –∑–∞–º–µ—Ä–ª–∞ –∏–∑-–∑–∞ –æ–¥–Ω–æ–≥–æ slow consumer
* Redis –Ω–µ –≤—ã—Ç—è–≥–∏–≤–∞–µ—Ç hot key
* Postgres —É–ø—ë—Ä—Å—è –≤ row lock
* PHP-FPM –¥–æ—Å—Ç–∏–≥ max_children –∏ –Ω–∞—á–∞–ª —Å—Ç–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≤–æ—Ä–∫–µ—Ä—ã
* Kafka consumer lag —Ä–∞—Å—Ç—ë—Ç –∏–∑-–∑–∞ –æ–¥–Ω–æ–≥–æ —Ç–æ—Ä–º–æ–∑–∞
* gRPC —Ä–µ—Ç—Ä–∞–∏ —É–º–Ω–æ–∂–∞—é—Ç –Ω–∞–≥—Ä—É–∑–∫—É ‚Üí –∫–ª–∞—Å—Ç–µ—Ä —É–º–∏—Ä–∞–µ—Ç

---

# 5. –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –°–ü–û–°–û–ë–´ –†–ï–®–ò–¢–¨ –≠–¢–£ –ë–û–õ–¨

## ‚úî –ò–∑–±–µ–≥–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

* —É–±—Ä–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ mutex‚Äô—ã
* –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö ID
* —É–±—Ä–∞—Ç—å centralized counters

## ‚úî Segregation of workloads

–†–∞–∑–¥–µ–ª–∏—Ç—å:

* write-heavy / read-heavy
* user traffic / batch jobs
* background tasks / synchronous API

## ‚úî –ò–∑–æ–ª—è—Ü–∏—è hot keys

* –æ—Ç–¥–µ–ª—å–Ω—ã–π Redis tier
* microsharding
* L1 cache

## ‚úî Backpressure

–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å **–æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å**, –∞ –Ω–µ —É–º–∏—Ä–∞—Ç—å:

* HTTP 429
* –ª–∏–º–∏—Ç—ã –Ω–∞ queue length
* –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è concurrency
* drop overload traffic

## ‚úî Circuit Breakers

–ß—Ç–æ–± –æ–¥–∏–Ω —É–º–∏—Ä–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å –Ω–µ —É—Ç—è–Ω—É–ª –∑–∞ —Å–æ–±–æ–π 10 –∑–¥–æ—Ä–æ–≤—ã—Ö.

## ‚úî Replication vs Sharding

–î–ª—è —á—Ç–µ–Ω–∏—è ‚Üí —Ä–µ–ø–ª–∏–∫–∏.
–î–ª—è –∑–∞–ø–∏—Å–∏ ‚Üí —à–∞—Ä–¥—ã.

‚Äú–ü–∏—Ö–∞—Ç—å –≤—Å—ë –≤ –æ–¥–Ω—É –±–∞–∑—É‚Äù ‚Äî –ø—Ä—è–º–æ–π –ø—É—Ç—å –∫ row-lock –∞–¥—É.

