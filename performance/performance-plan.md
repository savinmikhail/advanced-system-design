## –ß–∞—Å—Ç—å 4: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

*(—Ä–∞–±–æ—á–∏–π –ø–ª–∞–Ω —Å—Ü–µ–Ω–∞—Ä–∏—è)*

---

### üî• A. Tail Latency (–ø–æ—á–µ–º—É –Ω–∞—Å –≤–æ–ª–Ω—É—é—Ç –Ω–µ —Å—Ä–µ–¥–Ω–∏–µ, –∞ ‚Äú—Ö–≤–æ—Å—Ç—ã‚Äù)

#### 1. –ë–æ–ª—å

–°—Ä–µ–¥–Ω—è—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å 20 ms, –≤—Å—ë –∫—Ä–∞—Å–∏–≤–æ‚Ä¶
–ù–æ –∏–Ω–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å—ã –µ–¥—É—Ç 800 ms, 2 —Å–µ–∫—É–Ω–¥—ã, 5 —Å–µ–∫—É–Ω–¥.
–ò –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ ‚Äú—Ö–≤–æ—Å—Ç—ã‚Äù —É–±–∏–≤–∞—é—Ç UX, –∫–æ—à–º–∞—Ä—è—Ç –æ—á–µ—Ä–µ–¥–∏ –∏ —Ä–≤—É—Ç SLA.

–ü–æ—á–µ–º—É —Ç–∞–∫ –±—ã–≤–∞–µ—Ç:

* –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å –µ–ª–µ –¥—ã—à–∏—Ç
* –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –ø–æ–ø–∞–ª –Ω–∞ GC-–ø–∞—É–∑—É
* –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –ø–æ–ø–∞–ª –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –≤ –ë–î
* –æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω —Å–µ—Ç–∏ –ª–∞–≥–∞–µ—Ç
* –æ–¥–∏–Ω —à–∞—Ä Redis –ø–æ–π–º–∞–ª hot-key

–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç –æ –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã.

—Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ –±–æ–ª—å–Ω–∏—Ü–µ

---

#### 2. –ò–¥–µ—è

> –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –±—ã—Å—Ç—Ä—É—é —á–∞—Å—Ç—å = –∫—Ä–∞—Å–∏–≤–æ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö
> –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —Ö–≤–æ—Å—Ç 99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å = –∫—Ä–∞—Å–∏–≤–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ

---

#### 3. –ß—Ç–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å (–ø–æ –ø–æ—Ä—è–¥–∫—É)

1. –ß—Ç–æ —Ç–∞–∫–æ–µ p50 / p90 / p95 / p99 / p999
2. –ü–æ—á–µ–º—É p999 –≤–∞–∂–Ω–µ–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –∏ p95
3. Real-world —ç—Ñ—Ñ–µ–∫—Ç—ã:

    * –æ–¥–∏–Ω lagging backend —Ç—è–Ω–µ—Ç –≤–Ω–∏–∑ –≤–µ—Å—å —Å–µ—Ä–≤–∏—Å
    * "tail at scale" (—ç—Ñ—Ñ–µ–∫—Ç Google)
4. –ü—Ä–∏—á–∏–Ω—ã —Ö–≤–æ—Å—Ç–æ–≤ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö:

    * GC
    * —Å–µ—Ç–µ–≤—ã–µ —Ö–≤–æ—Å—Ç—ã
    * –≥–æ—Ä—è—á–∏–µ –∫–ª—é—á–∏
    * contention
    * –∫–∞—Å–∫–∞–¥–Ω—ã–µ retries
    * —Ñ–∞–Ω—Ç–æ–º–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
5. –¢–µ—Ö–Ω–∏–∫–∏ –±–æ—Ä—å–±—ã:

    * hedged requests (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤)
    * timeouts + retries –±–µ–∑ –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ –≤–∑—Ä—ã–≤–∞
    * load balancing –Ω–∞ –æ—Å–Ω–æ–≤–µ latency
    * –ª–æ–∫–∞–ª—å–Ω—ã–µ L1-–∫—ç—à–∏
    * –∏–∑–æ–ª—è—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    * —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
    * Queue-Based Load Leveling Pattern
    * Bulkhead Pattern.
    * circuit breaker?
    * deadline propagation (–∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å ‚Äú–∑–Ω–∞–µ—Ç‚Äù, —Å–∫–æ–ª—å–∫–æ –µ–º—É –∂–∏—Ç—å)

---

### üî• B. Throughput Scaling (–∫–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–º–∞–µ—Ç—Å—è –æ–± –∑–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏)

#### 1. –ë–æ–ª—å

‚Äú–î–æ–±–∞–≤–∏–º –µ—â—ë 10 —Å–µ—Ä–≤–µ—Ä–æ–≤ ‚Äî –±—É–¥–µ—Ç –≤ 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ‚Äù.
–ù—É –¥–∞, —É–¥–∞—á–∏.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:

* —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç –Ω–µ –ª–∏–Ω–µ–π–Ω–æ
* –∏–Ω–æ–≥–¥–∞ —Ä–∞—Å—Ç—ë—Ç –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∏
* –∏–Ω–æ–≥–¥–∞ –≤–æ–æ–±—â–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
* –∏–Ω–æ–≥–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ —É–∑–ª—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è bottleneck

---

#### 2. –ó–∞–∫–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å

1. **Amdahl‚Äôs Law** ‚Äî —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –Ω–µ–∏–∑–±–µ–∂–Ω–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏.
   –ü—Ä–∏–º–µ—Ä: 95% –æ–ø–µ—Ä–∞—Ü–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—è—Ç—Å—è, –Ω–æ 5% ‚Äî –Ω–µ—Ç ‚Üí –º–∞–∫—Å–∏–º—É–º x20 —É—Å–∫–æ—Ä–µ–Ω–∏—è, —Å–∫–æ–ª—å–∫–æ –∂–µ–ª–µ–∑–∞ –Ω–∏ —Å—É–π.

2. **Gustafson‚Äôs Law** ‚Äî –µ—Å–ª–∏ —Ä–∞—Å—Ç—ë—Ç –æ–±—ä—ë–º –∑–∞–¥–∞—á–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ª—É—á—à–µ.

3. **Universal Scalability Law (Gunther)**
   –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–µ:

    * —ç—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ (lock contention)
    * —ç—Ñ—Ñ–µ–∫—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ (overhead –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é)
    * –ø–æ—á–µ–º—É –ø–æ—Å–ª–µ N —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–¥–∞–µ—Ç

4. **Little‚Äôs Law** (–æ—á–µ—Ä–µ–¥–∏, latency = concurrency / throughput)
   –ö–∞–∫ —Ç—É–ø–æ –ø—Ä–µ–≤—ã—à–µ–Ω–Ω—ã–π RPS —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç latency.

---

#### 3. –ü—Ä–∏–º–µ—Ä—ã –±–æ–ª–∏

* –æ—á–µ—Ä–µ–¥—å RabbitMQ –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –∏–∑-–∑–∞ slow consumer
* Redis –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ bottleneck –Ω–∞ hot keys
* –±–∞–∑–∞ —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ mutex –Ω–∞ –æ–¥–Ω–æ–º —Å—á—ë—Ç—á–∏–∫–µ
* –ª–æ–≥–∏ –Ω–∞—á–∏–Ω–∞—é—Ç —Å—ã–ø–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ QPS > X
* PHP-FPM —É—Ö–æ–¥–∏—Ç –≤ max children –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –æ—Ç—Å—Ç—Ä–µ–ª–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∑–∞–¥–µ—Ä–∂–∫–æ–π

---

#### 4. –†–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ—à–µ–Ω–∏—è

* Horizontal scale vs vertical scale
* Replication vs sharding
* Avoid coordination (—É–±–∏—Ä–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
* –°–µ–≥—Ä–µ–≥–∞—Ü–∏—è –Ω–∞–≥—Ä—É–∑–æ–∫ (write-heavy / read-heavy)
* –ò–∑–æ–ª—è—Ü–∏—è –≥–æ—Ä—è—á–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
* Circuit breakers
* Backpressure (–Ω–µ –ø–∏—Ö–∞—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ)

---

### üî• C. Resource Optimization Trade-offs

*(–∫–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏ –ª–æ–º–∞–µ—Ç —Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö)*

#### 1. –ë–æ–ª—å

–¢—ã —É–º–µ–Ω—å—à–∏–ª latency ‚Üí –≤—ã—Ä–æ—Å–ª–∞ —Å—Ç–æ–∏–º–æ—Å—Ç—å.
–¢—ã —É–≤–µ–ª–∏—á–∏–ª throughput ‚Üí —É–ø–∞–ª–æ –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö.
–¢—ã —É–º–µ–Ω—å—à–∏–ª —Å—Ç–æ–∏–º–æ—Å—Ç—å ‚Üí —É–ø–∞–ª SLA.
–¢—ã —É–≤–µ–ª–∏—á–∏–ª –∫—ç—à ‚Äî —É–º–µ–Ω—å—à–∏–ª —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å.
–¢—ã –≤–∫–ª—é—á–∏–ª aggressive retries ‚Üí —É–±–∏–ª backend.

–í—Å—ë —Å—Ç–æ–∏—Ç —á–µ–≥–æ-—Ç–æ. –ù–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π.

---

#### 2. –ß—Ç–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ)

1. **Latency vs Consistency**

    * –∫—ç—à —É—Å–∫–æ—Ä—è–µ—Ç ‚Üí —Ç–µ—Ä—è–µ–º strong-consistency
    * eventual consistency –≤ –æ–±–º–µ–Ω –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å

2. **Throughput vs Accuracy**

    * sampling, probabilistic caching, bloom filters
    * approximate counters (HyperLogLog)

3. **Latency vs Cost**

    * –±–æ–ª—å—à–µ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ ‚Üí –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –¥–æ—Ä–æ–≥–æ
    * CDN –¥–µ—à—ë–≤—ã–π, –Ω–æ –∏–º–µ–µ—Ç stale window

4. **Consistency vs Availability**

    * CAP trade-off
    * –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –Ω–µ –ø–∞–¥–∞—Ç—å ‚Äî —Ç–µ—Ä—è–µ—à—å –∂—ë—Å—Ç–∫—É—é –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

5. **Caching vs Correctness**

    * stale data
    * cache invalidation –∫–∞–∫ —Ü–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏

6. **Parallelism vs Contention**

    * –±–æ–ª—å—à–µ –ø–æ—Ç–æ–∫–æ–≤ ‚Üí –±–æ–ª—å—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

---

#### 3. –ü—Ä–∏–º–µ—Ä—ã –±–æ–ª–∏

* –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ retries —É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç retry-storm
* –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ª–æ–º–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
* —É–º–µ–Ω—å—à–∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ ‚Üí —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å latency —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å
* —É–≤–µ–ª–∏—á–∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ ‚Üí –≤—ã—Ä–æ—Å–ª–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è ‚Üí —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
